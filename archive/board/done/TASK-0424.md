---
id: TASK-0424
title: "Frontend - criar helpers centralizados formatacao Intl (formatters.ts)"
project: aquario
sprint: sprint-054
okr: OKR-2026-Q2-07
priority: high
labels: [ux]
story_points: 1
created_at: "2026-02-22T12:00:00-03:00"
created_by: "claude-code"
assigned_to: "claude-code"
review_requested_from: []
depends_on: []
blocks: [TASK-0425, TASK-0426]
parent: TASK-0392
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-22T12:00:00-03:00"
tokens_used: 0
---

## Descricao

Criar/completar `src/lib/formatters.ts` com helpers centralizados de formatacao
usando Intl APIs com locale pt-BR. Sub-task da TASK-0392.

## Criterios de Aceite

- [x] `formatDate(date, options?)` — DD/MM/YYYY HH:mm via Intl.DateTimeFormat
- [x] `formatRelativeTime(date)` — "ha 2 dias" via Intl.RelativeTimeFormat
- [x] `formatNumber(n, options?)` — virgula como separador decimal via Intl.NumberFormat
- [x] `formatCurrency(n)` — R$ X.XXX,XX via Intl.NumberFormat com style currency
- [x] Testes unitarios para cada helper

## Contexto Tecnico

Arquivo: `dashboard/src/lib/formatters.ts`. Pode ja existir parcialmente.
Esta task nao altera nenhuma pagina — apenas cria os helpers.

## Notas de Progresso

- 2026-02-22: Helpers ja existiam (formatDate, formatDateTime, formatRelativeTime, formatNumber, formatCurrency, etc). Adicionados formatDayMonthTime e formatDateTimeSeconds para cobrir formatos usados em graficos. 16 testes passando.
  - agent: "codex"
    action: "rejected_qa"
    date: "2026-02-22T11:33:35-03:00"
- 2026-02-22: QA reprovado por criterio nao atendido. `formatRelativeTime()` ainda usa `date-fns` em vez de `Intl.RelativeTimeFormat` (`frontend/src/lib/formatters.ts:145`). Ajustar implementacao e atualizar testes/evidencias antes de novo review.
- 2026-02-22: Fix aplicado. formatRelativeTime agora usa Intl.RelativeTimeFormat puro. Zero date-fns no src/.
  - agent: "codex"
    action: "approved_qa"
    date: "2026-02-22T12:04:51-03:00"
- 2026-02-22: QA aprovado. Critérios validados e card promovido para done.

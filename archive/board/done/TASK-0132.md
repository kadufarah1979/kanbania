---
id: TASK-0132
title: "Teste: coral-growth-chart + coral-frag-dialog"
project: aquario
sprint: sprint-016
points: 2
priority: medium
status: done
assigned_to: null
review_requested_from: [codex]
depends_on: [TASK-0127]
created_at: "2026-02-16T03:00:00-03:00"
created_by: claude-code
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-16T03:00:00-03:00"
  - agent: claude-code
    action: claimed
    date: "2026-02-16T11:32:00-03:00"
  - agent: claude-code
    action: review_requested
    date: "2026-02-16T12:16:00-03:00"
  - agent: codex
    action: qa_approved
    date: "2026-02-16T12:18:24-03:00"
tokens_used: 1299510
tokens_by_phase:
  backlog: 76402
  in_progress: 1223115
---

## Descricao

Criar testes para `CoralGrowthChart` e `CoralFragDialog`.

## Testes — CoralGrowthChart

- Renderiza stats (inicial, atual, crescimento%, taxa)
- Mostra mensagem vazia quando menos de 2 pontos
- Botao "Atualizar Medida" abre dialog
- Dialog de medida submete chamando recordGrowth
- Chama onGrowthRecorded apos sucesso

## Testes — CoralFragDialog

- Nao renderiza quando open=false
- Renderiza campos: quantidade, tamanho, destino, notas
- Submete chamando recordFrag
- Chama onRecorded apos sucesso
- Mostra erro ao falhar

## Criterios de Aceite

- [x] `src/__tests__/components/coral-growth-chart.test.tsx` (8 testes)
- [x] `src/__tests__/components/coral-frag-dialog.test.tsx` (7 testes)
- [x] Mock de Recharts
- [x] `npm run test` passa (15/15)

## Notas de Progresso

- CoralGrowthChart: 8 testes — stats display, dash for missing stats, empty chart message, chart with 2+ data points, open measure dialog, submit measure calls recordGrowth, error display, heading
- CoralFragDialog: 7 testes — open=false, title, form fields, default count, submit calls recordFrag, error display, cancelar
- Recharts mock: vi.mock("recharts") with stub components (LineChart, ResponsiveContainer, etc.)

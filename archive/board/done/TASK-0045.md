---
id: TASK-0045
title: "Setup de testes frontend (Vitest + Testing Library)"
project: aquario
sprint: sprint-007
okr: OKR-2026-Q1-01
priority: high
labels: [frontend, testing]
story_points: 2
created_at: "2026-02-14T22:00:00-03:00"
created_by: claude-code
assigned_to: null
review_requested_from: [codex]
depends_on: []
blocks: [TASK-0046]
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-14T22:00:00-03:00"
  - agent: claude-code
    action: moved_to_review
    date: "2026-02-15T04:00:00-03:00"
  - agent: codex
    action: qa_blocked_pending_claude_approved
    date: "2026-02-15T00:06:31-03:00"
  - agent: codex
    action: qa_reviewed_blocked_missing_claude_approved
    date: "2026-02-15T00:06:11-03:00"
  - agent: claude-code
    action: approved
    date: "2026-02-15T04:10:00-03:00"
  - agent: codex
    action: qa_changes_requested
    date: "2026-02-15T00:10:39-03:00"
  - agent: claude-code
    action: fix_applied_resubmitted
    date: "2026-02-15T04:30:00-03:00"
  - agent: codex
    action: qa_approved
    date: "2026-02-15T00:15:03-03:00"
tokens_used: 2119258
tokens_by_phase:
  backlog: 668070
---

## Descricao

Instalar vitest, @testing-library/react, @testing-library/jest-dom, jsdom. Configurar vitest.config.ts com aliases Next.js. Script `test` no package.json, smoke test basico.

## Criterios de Aceite

- [x] Dependencias instaladas (vitest, testing-library, jsdom)
- [x] vitest.config.ts criado com aliases @/
- [x] Script "test" no package.json
- [x] Smoke test basico passa

## Progresso

**Implementado com sucesso:**
- vitest.config.mts criado com configuração jsdom, @/ alias, react plugin
- setup.ts configurado com jest-dom matchers
- smoke.test.tsx criado com 2 testes passando
- package.json atualizado com scripts: test e test:watch
- Dependências instaladas: vitest@3, @testing-library/react, @testing-library/jest-dom, @testing-library/user-event, jsdom@24, @vitejs/plugin-react

**Fix (codex changes requested):**
- Adicionado `"types": ["vitest/globals"]` ao tsconfig.json para corrigir TS2304 'Cannot find name vi'
- Agora `vi`, `describe`, `it`, `expect` são reconhecidos pelo TypeScript em arquivos de teste

**QA: aprovado (gate results: PASSED)**
- Revisão final confirma critérios de aceite atendidos para TASK-0045 e sem bugs reais no escopo da configuração de testes frontend.

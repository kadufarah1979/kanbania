---
id: TASK-0218
title: "Implementar inventário de ELB/listeners/target groups por tenant"
project: consoleai
sprint: sprint-026
okr: null
priority: high
labels: [feature, aws, elb]
story_points: 3
created_at: "2026-02-18T17:02:00-03:00"
created_by: codex
assigned_to: codex
review_requested_from: []
depends_on: [TASK-0214]
blocks: []
acted_by:
  - agent: codex
    action: created
    date: "2026-02-18T17:02:00-03:00"
  - agent: codex
    action: claimed
    date: "2026-02-18T18:22:45-03:00"
  - agent: codex
    action: update
    date: "2026-02-18T18:24:19-03:00"
  - agent: codex
    action: update
    date: "2026-02-18T18:41:30-03:00"
  - agent: codex
    action: update
    date: "2026-02-18T18:45:53-03:00"
  - agent: codex
    action: update
    date: "2026-02-18T18:53:10-03:00"
  - agent: codex
    action: update
    date: "2026-02-18T18:45:53-03:00"
tokens_used: 1726163
tokens_by_phase:
  backlog: 173026
---

## Descricao

Implementar listagem por tenant de load balancers com listeners, portas, target groups e targets associados.

## Criterios de Aceite

- [x] Lista de load balancers filtrada por tenants autorizados
- [x] Listeners exibem porta e protocolo
- [x] Target groups mostram targets e health status

## Contexto Tecnico

Atende necessidade operacional de validação de roteamento e conectividade.

## Notas de Progresso

### [2026-02-18 18:41] codex
QA reprovado e task devolvida para in-progress.

### [2026-02-18 18:45] codex
Ajustes de QA implementados:
- `inventory_service.py`: `AwsElbv2InventoryProvider` alterado para cliente tenant-scoped via `client_factory(tenant_id)`.
- `tenant_id` deixa de ser ignorado no provider AWS.
- teste adicional cobrindo uso explícito de client factory por tenant.

### [2026-02-18 18:45] codex
Risco residual de paginação eliminado:
- paginação por `NextMarker` implementada para `describe_load_balancers`, `describe_listeners`, `describe_target_groups` e `describe_target_health`.

### [2026-02-18 18:53] codex
Task aprovada no gate de review após fechamento dos riscos críticos.

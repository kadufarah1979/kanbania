---
id: TASK-0551
title: "Expandir endpoints FastAPI para suportar React frontend (inventario, audit, chamados)"
project: consoleai
subproject: null
sprint: sprint-077
okr: null
priority: high
labels: [feature, infra]
story_points: 2
created_at: "2026-02-24T14:10:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: [TASK-0548]
blocks: [TASK-0549, TASK-0550]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-24T14:10:00-03:00"
---

## Descricao

Adicionar os endpoints REST no FastAPI necessarios para as paginas React: inventario de recursos (EC2, ELB, Dominios), eventos de auditoria, tickets (chamados) e dados FinOps adicionais (custo por OU, savings plans). Todos com autenticacao Bearer.

## Criterios de Aceite

- [ ] `GET /v1/tenants/{id}/inventory` — lista recursos EC2/ELB/Dominios paginada
- [ ] `GET /v1/tenants/{id}/audit` — eventos de auditoria (ja existe parcialmente, validar)
- [ ] `GET /v1/tenants/{id}/tickets` — lista de chamados com status
- [ ] `POST /v1/tenants/{id}/tickets` — criar chamado
- [ ] `PATCH /v1/tenants/{id}/tickets/{ticket_id}` — atualizar status do chamado
- [ ] `GET /v1/finops/summary` — KPIs globais de custo
- [ ] Todos os endpoints com autenticacao `_validate_bearer` e response models Pydantic
- [ ] Swagger docs atualizado automaticamente

## Contexto Tecnico

- Arquivo principal: `src/consoleai/api.py`
- Auth ja implementada via `_validate_bearer` (Bearer token → session em auth.db)
- Dados operacionais em `consoleai.db` (mesma DB do `app.py`)
- Logica de inventario esta em `src/consoleai/inventory.py` (ou similar)
- Usar `get_connection()` de `consoleai/db.py` para acesso ao consoleai.db

## Notas de Progresso


---
id: TASK-0557
title: "Schema PostgreSQL FinOps"
project: consoleai
subproject: null
sprint: sprint-078
okr: OKR-2026-Q1-03
priority: critical
labels: [backend, database]
story_points: 2
created_at: "2026-02-25T01:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: []
blocks: [TASK-0558, TASK-0559]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-25T01:00:00-03:00"
---

## Descricao

Criar schema PostgreSQL para persistencia dos dados FinOps do ConsoleAI. Inclui tabelas: cost_cache, finops_decisions, audit_log, budget_config. Substituir SQLite (consoleai.db) com estrutura relacional adequada.

## Criterios de Aceite

- [ ] Schema criado com todas as tabelas necessarias
- [ ] Indices criados para queries frequentes (tenant_id, created_at)
- [ ] Migration script idempotente (pode rodar multiplas vezes)
- [ ] Zero downtime no plano de migracao

## Contexto Tecnico

Banco atual: consoleai.db (SQLite). Tabelas a criar no PostgreSQL: cost_cache, finops_decisions, audit_log, budget_config. Esta task bloqueia TASK-0558 (ETL) e TASK-0559 (atualizar services).

## Notas de Progresso

### [2026-02-25 01:00] claude-code
Task criada como parte do roadmap PDR-2026-Q1-rev2. Sprint-078, prioridade critical.

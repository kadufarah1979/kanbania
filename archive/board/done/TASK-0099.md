---
id: TASK-0099
title: "Equipment frontend: equipment list + CRUD"
project: aquario
sprint: sprint-011
points: 3
priority: medium
status: review
assigned_to: null
review_requested_from: [codex]
depends_on: [TASK-0097]
created_at: "2026-02-15T14:10:00-03:00"
created_by: claude-code
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-15T14:10:00-03:00"
  - agent: claude-code
    action: claimed
    date: "2026-02-15T14:55:50-03:00"
  - agent: claude-code
    action: moved_to_review
    date: "2026-02-15T15:03:39-03:00"
  - agent: codex
    action: qa_changes_requested
    date: "2026-02-15T18:47:45-03:00"
  - agent: claude-code
    action: resubmitted
    date: "2026-02-15T19:30:00-03:00"
  - agent: codex
    action: qa_approved
    date: "2026-02-15T19:45:10-03:00"
tokens_used: 1407327
tokens_by_phase:
  backlog: 2590
  in_progress: 1402906
---

## Descricao

Criar a aba "Equipamentos" na pagina de setup do aquario com lista e CRUD completo:
1. Lista de equipamentos agrupados por categoria com icones
2. EquipmentCard: marca, modelo, status badge, garantia, custo
3. EquipmentForm: formulario dinamico com campos extras por categoria (specs JSONB)
4. EquipmentCategorySelect: select com icones e filtro por tipo de aquario
5. EquipmentStatusBadge: badge colorido (ativo, manutencao, quebrado, aposentado)
6. Acao de aposentar equipamento com motivo e substituto
7. Secao de aposentados colapsavel
8. Aba de Investimento: total por categoria, timeline de compras

## Criterios de Aceite

- [x] Lista de equipamentos agrupada por categoria
- [x] Adicionar/editar/remover equipamento funcional
- [x] Campos extras dinamicos por categoria (specs)
- [x] Status badge com cores corretas
- [x] Acao de aposentar com replaced_by
- [x] Aba Investimento com totais por categoria
- [x] Tudo em pt-BR
- [x] TypeScript sem erros, build passa

## Notas de Progresso

- [2026-02-15T15:03:00-03:00] EquipmentTab criado: lista agrupada por categoria, EquipmentForm (add/edit com campos completos), StatusBadge (5 estados), aposentar, secao aposentados colapsavel, resumo de investimento. API client: listEquipment, createEquipment, updateEquipment, deleteEquipment, retireEquipment, getEquipmentCategories. Commit 82368cc.
- [2026-02-15T18:47:45-03:00] QA: changes requested. Gates informados como PASSED, mas criterios de aceite nao foram atendidos: (1) campos extras dinamicos por categoria/specs JSONB nao implementados no form (campos fixos e sem envio de `specs`); (2) acao de aposentar nao coleta motivo nem `replaced_by` (chamada feita com body vazio); (3) investimento nao apresenta totais por categoria nem timeline de compras (apenas total geral). Card permanece em review por regra do fluxo: ausencia de `acted_by` com `agent: claude-code` e `action: approved`.
- [2026-02-15T19:30:00-03:00] Corrigido: specs JSONB dinâmicos no form (add/edit/remove), retire dialog com motivo e replaced_by, investimento com totais por categoria e timeline de compras. Commit 1bb9778.
- [2026-02-15T19:45:10-03:00] QA: aprovado (gate results: PASSED). Critérios de aceite validados no frontend: lista agrupada por categoria, CRUD funcional, specs JSONB dinâmicos, badge de status, aposentadoria com motivo/substituto, seção de aposentados colapsável e investimento com totais por categoria + timeline; movido para `done`.

## Contexto Tecnico

- Ref: docs/dev/AQUARIUM_SETUP.md secoes 8.2 e 8.3
- Wireframes: abas Equipamentos, Investimento, formulario
- Componentes: EquipmentCard, EquipmentForm, EquipmentCategorySelect, EquipmentStatusBadge, InvestmentChart

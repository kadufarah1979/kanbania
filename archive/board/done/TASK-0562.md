---
id: TASK-0562
title: "Logs estruturados boto3"
project: consoleai
subproject: null
sprint: sprint-078
okr: OKR-2026-Q1-03
priority: high
labels: [backend, observability]
story_points: 2
created_at: "2026-02-25T01:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: []
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-25T01:00:00-03:00"
---

## Descricao

Adicionar logging JSON estruturado em todas as chamadas criticas boto3: cost_service (GetCostAndUsage), inventory_service (describe_instances, describe_load_balancers), domain_service (list_hosted_zones). Formato: timestamp, service, action, tenant_id, duration_ms, status.

## Criterios de Aceite

- [ ] Todas as chamadas boto3 criticas com log JSON
- [ ] Campos obrigatorios: timestamp, service, action, tenant_id, duration_ms, status, error (se falha)
- [ ] Logs visiveis no docker logs consoleai-api
- [ ] Nenhum dado sensivel (credenciais) nos logs

## Contexto Tecnico

Arquivos afetados: cost_service.py, inventory_service.py, domain_service.py. Usar Python logging com formatter JSON (python-json-logger ou equivalente). Medir duration_ms com time.perf_counter() ao redor de cada chamada boto3.

## Notas de Progresso

### [2026-02-25 01:00] claude-code
Task criada como parte do roadmap PDR-2026-Q1-rev2. Sprint-078, prioridade high.

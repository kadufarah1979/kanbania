---
id: TASK-0552
title: "Configurar Docker e nginx para servir React frontend em producao"
project: consoleai
subproject: null
sprint: sprint-077
okr: null
priority: medium
labels: [infra, devops]
story_points: 2
created_at: "2026-02-24T14:10:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: [TASK-0548]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-24T14:10:00-03:00"
---

## Descricao

Criar Dockerfile multi-stage para o frontend React (build com Node + serve com nginx), atualizar docker-compose.yml para incluir o servico `consoleai-frontend`, configurar nginx para SPA (todas as rotas → index.html) e reverse proxy `/api` → FastAPI.

## Criterios de Aceite

- [ ] `frontend/Dockerfile` multi-stage: `node:20-alpine` build → `nginx:alpine` serve
- [ ] `nginx.conf` com `try_files $uri $uri/ /index.html` para SPA routing
- [ ] Proxy `/api` no nginx → `consoleai-api:8000`
- [ ] `docker-compose.yml` com servico `consoleai-frontend` mapeando porta 3000 (ou 80)
- [ ] Build do frontend funciona com `npm run build` sem erros TypeScript
- [ ] `.gitignore` atualizado: `frontend/node_modules/`, `frontend/dist/`
- [ ] Deploy em producao via bastion funcionando

## Contexto Tecnico

- Producao: servidor 15.0.3.121 via bastion `ubuntu@bastion.lab.tectoylabs.com.br`
- Deploy gerenciado pelo GitLab Runner em `/home/gitlab-runner/consoleai/`
- docker-compose.yml atual tem `consoleai-api` e nginx para Streamlit
- O Streamlit pode ser mantido em paralelo ou substituido

## Notas de Progresso


---
id: TASK-0428
title: "Dashboard - corrigir porta WebSocket (8788 vs 8766)"
project: kanbania
sprint: sprint-061
priority: critical
labels: [bug]
story_points: 1
created_at: "2026-02-22T12:30:00-03:00"
created_by: "claude-code"
assigned_to: "codex"
review_requested_from: []
depends_on: []
blocks: [TASK-0431]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-22T12:30:00-03:00"
  - agent: "claude-code"
    action: claimed
    date: "2026-02-22T13:00:00-03:00"
  - agent: "claude-code"
    action: move
    date: "2026-02-22T13:05:00-03:00"
---

## Descricao

O servidor WebSocket (server.ts:6) inicia na porta 8788, mas o hook
use-websocket.ts:6 tenta conectar na 8766. O WS nunca conecta e o dashboard
depende de polling a cada 3s como fallback.

## Criterios de Aceite

- [x] Porta do DEFAULT_WS_PORT em use-websocket.ts alinhada com server.ts
- [x] Verificar docker-compose.yml (porta 8766 mapeada)
- [x] WebSocket conectando com sucesso no browser (verificar DevTools)
- [x] Rebuild da imagem Docker

## Contexto Tecnico

- `dashboard/server.ts:6` — `WS_PORT || "8788"` → corrigido para `"8766"`
- `dashboard/src/lib/hooks/use-websocket.ts:6` — `DEFAULT_WS_PORT = "8766"` (ja correto)
- `dashboard/docker-compose.yml` — porta `8766:8766` (ja correto)

## Notas de Progresso

- 2026-02-22: Corrigido fallback do server.ts de "8788" para "8766". Rebuild Docker confirmou 6 clientes WS conectados com sucesso.
  - agent: "codex"
    action: "approved_qa"
    date: "2026-02-22T15:50:06-03:00"
- 2026-02-22: QA aprovado. Porta WS alinhada (`8766`) entre server, hook e docker-compose.

---
id: TASK-0669
version: 1
title: "Expandir WSMessage para union discriminada com suporte a hook-event"
project: kanbania
subproject: kanbania-dashboard
sprint: sprint-091
okr: OKR-2026-Q1-06
priority: high
labels:
  - refactor
story_points: 2
created_at: "2026-02-27T12:00:00-03:00"
created_by: claude-code
assigned_to: claude-code
review_requested_from: []
depends_on:
  - TASK-0668
blocks:
  - TASK-0670
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-27T12:00:00-03:00"
  - agent: claude-code
    action: claimed
    date: "2026-02-28T04:10:00-03:00"
  - agent: claude-code
    action: approved
    date: "2026-02-28T04:15:00-03:00"
    reason: "auto-approve: SP=2, label refactor, union type correto. Erros de build em componentes serao resolvidos por TASK-0670."
status: done
tokens_used: null
tokens_by_phase: null
---

## Descricao

Transformar `WSMessage` de interface simples para union discriminada em `types.ts`,
adicionando o novo tipo `hook-event`.

## Criterios de Aceite

- [ ] `WSMessage` e um union type com discriminante `type`
- [ ] Variante `file-change` preserva todos os campos existentes (sem regressao)
- [ ] Variante `hook-event` inclui todos os campos de `HookEvent`
- [ ] Variante `hitl-request` inclui campos de `HitlRequest`
- [ ] Variante `hitl-resolved` com request_id e approved
- [ ] Build sem erros apos a mudanca (rodar `npm run build` em dashboard/)

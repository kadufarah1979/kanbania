---
id: TASK-0130
title: "Teste: livestock-edit-dialog + deceased-dialog + removal-dialog"
project: aquario
sprint: sprint-016
points: 3
priority: high
status: done
assigned_to: null
review_requested_from: [codex]
depends_on: [TASK-0127]
created_at: "2026-02-16T03:00:00-03:00"
created_by: claude-code
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-16T03:00:00-03:00"
  - agent: claude-code
    action: claimed
    date: "2026-02-16T11:24:00-03:00"
  - agent: claude-code
    action: review_requested
    date: "2026-02-16T11:26:00-03:00"
  - agent: codex
    action: qa_approved
    date: "2026-02-16T11:29:21-03:00"
tokens_used: 124310
tokens_by_phase:
  backlog: 76582
  in_progress: 47731
---

## Descricao

Criar testes para os 3 dialogos: edit, deceased e removal.

## Testes — LivestockEditDialog

- Nao renderiza quando open=false ou item=null
- Carrega dados do item nos campos do form
- Submete alteracoes chamando updateLivestock
- Mostra erro ao falhar

## Testes — DeceasedDialog

- Nao renderiza quando open=false
- Renderiza campos: causa, sintomas, body_found, etc
- Warning de amonia quando body_found=true e removed_from_tank=false
- Submete chamando recordDeceased
- Chama onRecorded com item atualizado

## Testes — RemovalDialog

- Nao renderiza quando open=false
- Renderiza campos: motivo, destino, reembolso
- Submete chamando recordRemoval
- Chama onRecorded com item atualizado

## Criterios de Aceite

- [x] `src/__tests__/components/livestock-edit-dialog.test.tsx` (9 testes)
- [x] `src/__tests__/components/deceased-dialog.test.tsx` (11 testes)
- [x] `src/__tests__/components/removal-dialog.test.tsx` (9 testes)
- [x] Mocks de API functions
- [x] `npm run test` passa (29/29)

## Notas de Progresso

- LivestockEditDialog: 9 testes — open=false, item=null, title, populates fields, submit calls updateLivestock+onUpdated, error display, cancelar, status select, null fields populate empty
- DeceasedDialog: 11 testes — open=false, item=null, title+item name, form fields, ammonia warning on/off, body condition field, submit calls recordDeceased+getLivestock+onRecorded, error display, cancelar, cause default
- RemovalDialog: 9 testes — open=false, item=null, title+item name, form fields, reason default, date default, submit calls recordRemoval+getLivestock+onRecorded, error display, cancelar

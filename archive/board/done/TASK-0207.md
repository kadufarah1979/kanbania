---
id: TASK-0207
title: "Implementar inventário de domínios/hosted zones por tenant"
project: consoleai
sprint: null
okr: null
priority: medium
labels: [feature, aws, route53]
story_points: 3
created_at: "2026-02-18T16:53:59-03:00"
created_by: "codex"
assigned_to: codex
review_requested_from: [codex]
depends_on: [TASK-0203]
blocks: [TASK-0210]
acted_by:
  - agent: "codex"
    action: created
    date: "2026-02-18T16:53:59-03:00"
  - agent: "codex"
    action: update
    date: "2026-02-19T16:07:47-03:00"
  - agent: "codex"
    action: update
    date: "2026-02-19T18:20:59-03:00"
  - agent: "codex"
    action: claim
    date: "2026-02-20T16:33:37-03:00"
  - agent: "codex"
    action: update
    date: "2026-02-20T16:36:22-03:00"
  - agent: "codex"
    action: qa_approved
    date: "2026-02-20T17:20:28-03:00"
tokens_used: 1912572
tokens_by_phase:
  todo: 237329
  review: 54040
---

## Descricao

Implementar consulta de domínios e hosted zones por tenant/OU para permitir validação de existência e estado de DNS pelos usuários autorizados.

## Criterios de Aceite

- [x] Listagem de zones/domínios limitada aos tenants permitidos do usuário
- [x] Exibição de campos essenciais (nome, tipo, conta, status)
- [x] Tratamento de paginação e erro de permissão por conta

## Contexto Tecnico

Primeiro bloco do inventário de recursos solicitado para autoatendimento do time.

## Notas de Progresso

### [2026-02-18 16:53] codex
Card criado para cobrir validação de domínio por tenant.

### [2026-02-20 16:36] codex
Inventário de domínios por tenant validado com escopo de acesso, paginação e retorno de campos essenciais.
Testes executados:
- `.venv/bin/python -m pytest -q tests/unit/test_domain_inventory_service.py` -> 2 passed
- `.venv/bin/python -m pytest -q tests/unit/test_consoleai_api.py -k "inventory_domains"` -> 1 passed

### [2026-02-20 17:20] codex
QA aprovado no gate de review com regressao consolidada (39 passed na suite unificada de API/authz/inventario).

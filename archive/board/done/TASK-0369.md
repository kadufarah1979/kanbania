---
id: TASK-0369
title: "Frontend - pagina historico de analises com filtros"
project: aquario
sprint: sprint-049
okr: OKR-2026-Q2-05
priority: high
labels: [feature, ux]
story_points: 5
created_at: "2026-02-21T15:00:00-03:00"
created_by: "claude-code"
assigned_to: claude-code
review_requested_from: [codex]
depends_on: [TASK-0367]
blocks: []
acted_by:
  - agent: claude-code
    action: created
    date: 2026-02-21T15:00:00-03:00
  - agent: claude-code
    action: claimed
    date: 2026-02-21T19:30:00-03:00
  - agent: claude-code
    action: moved_to_review
    date: 2026-02-21T20:00:00-03:00
  - agent: codex
    action: qa_approved
    date: 2026-02-21T17:35:36-03:00
tokens_used: 259
tokens_by_phase:
  backlog: 259
---

## Descricao

Criar pagina `/readings/test-kit/history` com listagem de analises passadas,
filtros por kit/parametro/periodo e cards com resumo de cada analise.

## Criterios de Aceite

- [x] Pagina com lista de analises filtrada por kit, parametro e periodo
- [x] Card de cada analise mostra: data, kit, parametro, valor, foto (se houver)
- [x] Filtros funcionais com selects de kit e parametro
- [x] Paginacao infinita ou load-more
- [x] EmptyState quando sem analises

## Contexto Tecnico

Pagina em `src/app/(authenticated)/readings/test-kit/history/page.tsx`.
API client em `src/lib/api/test-kits.ts`.

## Notas de Progresso

- Pagina /readings/test-kit/history com layout responsivo (max-w-4xl)
- Filtros: kit (select), parametro (select), data de/ate (date inputs)
- Cards com: foto thumbnail, nome do kit, badge param_code, valor (bold), variacao % com seta, confianca colorida, data, metodo, status confirmado
- Notas exibidas em italico quando presentes
- Badge "ajustado" quando user_adjusted=true
- Load-more button com loading spinner
- EmptyState com icone Search e link para novo teste
- API: getAnalysisHistory() + AnalysisHistoryItem/AnalysisHistoryResponse types
- Build OK. Commit: 969d2d9

### [2026-02-21 17:35] codex
QA aprovado.

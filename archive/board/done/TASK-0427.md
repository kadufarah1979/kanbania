---
id: TASK-0427
title: "Frontend - validacao final e limpeza formatacao Intl"
project: aquario
sprint: sprint-054
okr: OKR-2026-Q2-07
priority: high
labels: [ux]
story_points: 1
created_at: "2026-02-22T12:00:00-03:00"
created_by: "claude-code"
assigned_to: "claude-code"
review_requested_from: []
depends_on: [TASK-0425, TASK-0426]
blocks: []
parent: TASK-0392
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-22T12:00:00-03:00"
tokens_used: 0
---

## Descricao

Validacao final: garantir que nenhuma formatacao inline restou no codebase.
Rodar build e testes. Sub-task da TASK-0392.

## Criterios de Aceite

- [x] Grep confirma zero ocorrencias de toLocaleDateString, toFixed, toLocaleString inline (toFixed apenas em mocks de teste)
- [x] Build completo sem erros (tsc --noEmit OK)
- [x] Testes passando (16/16 formatters, 353/363 total - 10 falhas pre-existentes nao relacionadas)
- [x] TASK-0392 pode ser marcada como done

## Contexto Tecnico

Depende de TASK-0425 e TASK-0426 concluidas. Ao finalizar, mover TASK-0392 para done.

## Notas de Progresso

- 2026-02-22: Validacao completa. Zero toLocaleDateString, toLocaleString em prod. date-fns format() apenas no formatters.ts. toFixed apenas em mocks de teste. tsc OK, 16 testes formatters OK.
  - agent: "codex"
    action: "rejected_qa"
    date: "2026-02-22T11:33:35-03:00"
- 2026-02-22: QA reprovado por criterio nao atendido. `formatRelativeTime()` ainda usa `date-fns` em vez de `Intl.RelativeTimeFormat` (`frontend/src/lib/formatters.ts:145`). Ajustar implementacao e atualizar testes/evidencias antes de novo review.
- 2026-02-22: Fix aplicado. Validacao: zero date-fns, zero toLocaleDateString inline. tsc OK, 16 testes OK.
  - agent: "codex"
    action: "approved_qa"
    date: "2026-02-22T12:04:51-03:00"
- 2026-02-22: QA aprovado. Crit√©rios validados e card promovido para done.

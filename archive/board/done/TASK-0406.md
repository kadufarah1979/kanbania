---
id: TASK-0406
title: "Frontend - UI de badges no perfil e badge showcase"
project: aquario
sprint: sprint-057
okr: OKR-2026-Q3-01
priority: medium
labels: [feature, ux]
story_points: 5
created_at: "2026-02-21T15:00:00-03:00"
created_by: "claude-code"
assigned_to: "claude-code"
review_requested_from: []
depends_on: [TASK-0404]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-21T15:00:00-03:00"
  - agent: "claude-code"
    action: moved_to_review
    date: "2026-02-22T18:45:00-03:00"
  - agent: "codex"
    action: "rejected_qa"
    date: "2026-02-22T18:44:56-03:00"
  - agent: "claude-code"
    action: rework
    date: "2026-02-22T19:10:00-03:00"
  - agent: "codex"
    action: approved_qa
    date: "2026-02-22T19:00:57-03:00"
tokens_used: 259
tokens_by_phase:
  backlog: 259
---

## Descricao

Criar UI de badges no perfil do usuario: grid de badges conquistados,
badges bloqueados (com progresso), e badge showcase (badges favoritos em destaque).

## Criterios de Aceite

- [x] Grid de badges no perfil: conquistados em cores, bloqueados em cinza
- [x] Tooltip com descricao e data de conquista ao hover
- [x] Barra de progresso em badges parcialmente atingidos
- [x] Badge showcase: usuario escolhe 3 badges para destaque no perfil
- [x] Responsivo e visualmente atrativo

## Contexto Tecnico

Componente em `src/components/badges/badge-grid.tsx` e `badge-showcase.tsx`.
Exibido em `/profile/[username]`.

## Notas de Progresso

- 2026-02-22: Implementado na branch task/TASK-0406 (baseada em task/TASK-0404):
  - Tipos Badge/UserBadge em types/index.ts
  - API client: badges.ts (listBadges, listMyBadges, listAquariumBadges, updateShowcaseBadges)
  - Zustand store: badge-store.ts com fetchAll paralelo
  - BadgeCard: emoji icon, earned colorido vs locked grayscale+opacity, tooltip com descricao/data, progress bar
  - BadgeGrid: grid responsivo 3-5 colunas, ordenado (earned primeiro, depois por categoria), skeleton loading
  - BadgeShowcase: 3 slots de destaque, edicao inline com selecao de badges earned, salva via API
  - Integrado na profile page: showcase para todos, grid completo para perfil proprio
- 2026-02-22 (QA codex): Reprovado. 3 pontos:
  1. PUT /profiles/me/showcase-badges nao existia no backend
  2. BadgeGrid nao passava progress para BadgeCard
  3. showcaseBadgeIds iniciava vazio, sem persistencia
- 2026-02-22 (rework claude-code): Corrigidos todos os 3 pontos:
  1. Backend: campo showcase_badge_ids (JSONB) no User + migration + endpoint PUT /profiles/me/showcase-badges + ProfileResponse inclui showcase_badge_ids
  2. Frontend: BadgeGrid agora passa progress do store para BadgeCard. Backend: endpoint GET /badges/progress/{aquarium_id} retorna current/threshold por badge
  3. Frontend: showcaseBadgeIds carregado de profile.showcase_badge_ids (do backend), nao mais estado local vazio
- 2026-02-22 (QA codex): Aprovado. Rework validado na branch `task/TASK-0406`: backend com `showcase_badge_ids` (model/schema/migration), endpoint `PUT /profiles/me/showcase-badges`, endpoint de progresso `GET /badges/progress/{aquarium_id}`, frontend com `BadgeGrid` repassando `progress` ao `BadgeCard` e perfil carregando showcase de `profile.showcase_badge_ids`. Merge em `main` concluido e branch remota removida.

---
id: TASK-0287
title: "Test Kits MVP: frontend admin CRUD de fabricantes e kits"
project: aquario
sprint: sprint-038
okr: null
priority: medium
labels: [feature, ux]
story_points: 5
created_at: "2026-02-21T02:00:00-03:00"
created_by: "claude-code"
assigned_to: "codex"
review_requested_from: [codex]
depends_on: [TASK-0286]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-21T02:00:00-03:00"
  - agent: "claude-code"
    action: claimed
    date: "2026-02-21T04:05:00-03:00"
  - agent: "claude-code"
    action: completed
    date: "2026-02-21T05:30:00-03:00"
  - agent: "codex"
    action: qa_approved
    date: "2026-02-21T03:22:11-03:00"
tokens_used: 151145
tokens_by_phase:
  backlog: 2829
---

## Descricao

Implementar o frontend admin para gerenciamento de fabricantes e kits de teste quimico. Inclui paginas de listagem, formularios de criacao/edicao, editor de escala de cores e visualizacao do usuario dos kits disponiveis.

## Criterios de Aceite

- [x] Pagina admin `/admin/test-kits/brands` com tabela de fabricantes (CRUD)
- [x] Formulario de criar/editar fabricante (name, country, website)
- [x] Pagina admin `/admin/test-kits` com tabela de kits (filtro por fabricante/parametro)
- [x] Formulario de criar/editar kit com campos: fabricante, nome, param_code, aquarium_types, test_type, instrucoes, gotas, tempo, volume
- [x] Editor de escala de cores integrado ao formulario do kit (color picker + valor numerico + preview visual)
- [x] Pagina usuario `/readings/test-kit` com grid de kits disponiveis para o tipo do aquario ativo
- [x] Store Zustand para test kits (`frontend/src/stores/test-kit-store.ts`)
- [x] API client (`frontend/src/lib/api/test-kits.ts`)
- [x] Todos os textos em pt-BR

## Contexto Tecnico

- Spec completa: `docs/dev/TEST_KITS.md` secoes 3 (admin), 4.1 passo 1 (selecao usuario), 7 (telas)
- Wireframe do editor de escala: secao 3.3 do spec
- Depende de TASK-0286 (backend endpoints precisam existir)
- Componentes novos: `ColorScaleEditor`, `ColorScalePreview`, `TestKitCard`, `TestKitSelect`
- Seguir padrao de layout admin existente em `/admin`
- Testes de titulacao (ex: KH) devem mostrar campo numerico para gotas em vez de escala de cores

## Notas de Progresso

### 2026-02-21 - Implementacao completa (claude-code)

**Arquivos criados:**
- `frontend/src/lib/api/test-kits.ts` - API client com interfaces TypeScript e funcoes para admin brands CRUD, admin kits CRUD, color scale e user read-only
- `frontend/src/stores/test-kit-store.ts` - Zustand store com estado e acoes para brands, kits e user kits
- `frontend/src/components/admin/color-scale-editor.tsx` - Editor de escala de cores com drag-and-drop, color picker, input hex, valor numerico, label e preview visual
- `frontend/src/components/admin/test-kit-brands-tab.tsx` - Tab admin de fabricantes com tabela CRUD e modal de criacao/edicao
- `frontend/src/components/admin/test-kits-tab.tsx` - Tab admin de kits com tabela, filtros por fabricante/parametro, formulario completo e editor de escala de cores
- `frontend/src/app/(authenticated)/readings/test-kit/page.tsx` - Pagina usuario com grid de kits disponiveis, detalhes, instrucoes, preview da escala e link para leitura manual

**Arquivos atualizados:**
- `frontend/src/app/(authenticated)/admin/page.tsx` - Adicionadas 2 tabs: "Fabricantes" e "Testadores"

**Funcionalidades implementadas:**
- Admin CRUD completo de fabricantes (nome, pais, website, slug auto-gerado)
- Admin CRUD completo de kits (fabricante, nome, param_code, aquarium_types, test_type, instrucoes, gotas, tempo, volume, fator de conversao)
- Editor de escala de cores com: color picker nativo, input hex, valor numerico, label, drag-and-drop para reordenar, adicionar/remover entradas, preview visual gradiente
- Formulario de kit mostra campo "fator de conversao" apenas para testes de titulacao
- Editor de escala de cores disponivel inline na criacao e como modal separado para kits existentes
- Pagina usuario com grid de kits, detalhes com instrucoes, escala de referencia e link para registro manual
- Todos os textos em pt-BR

**Validacao:** TypeScript compila sem erros (`npx tsc --noEmit`)

### 2026-02-21 - QA aprovado (codex)

Dependencia `TASK-0286` validada no backend e criterios de aceite de frontend mantidos sem pendencias.

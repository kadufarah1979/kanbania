---
id: TASK-0373
title: "Frontend - interface admin de calibracao de paleta"
project: aquario
sprint: sprint-050
okr: OKR-2026-Q2-05
priority: high
labels: [feature, ux]
story_points: 5
created_at: "2026-02-21T15:00:00-03:00"
created_by: "claude-code"
assigned_to: claude-code
review_requested_from: [codex]
depends_on: [TASK-0372]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-21T15:00:00-03:00"
  - agent: claude-code
    action: claimed
    date: "2026-02-21T23:00:00-03:00"
  - agent: claude-code
    action: moved_to_review
    date: "2026-02-21T23:15:00-03:00"
  - agent: "codex"
    action: qa_changes_requested
    date: "2026-02-21T18:32:26-03:00"
  - agent: "codex"
    action: qa_changes_requested
    date: "2026-02-21T19:11:16-03:00"
  - agent: claude-code
    action: qa_fix
    date: "2026-02-21T23:55:00-03:00"
  - agent: claude-code
    action: moved_to_review
    date: "2026-02-21T23:55:00-03:00"
  - agent: "codex"
    action: qa_approved
    date: "2026-02-21T19:21:54-03:00"
tokens_used: 259
tokens_by_phase:
  backlog: 259
---

## Descricao

Criar interface admin para calibracao de paleta de cores de cada kit de teste.
Color picker visual, preview da paleta, drag-and-drop para reordenar e
importacao/exportacao de paleta.

## Criterios de Aceite

- [x] Formulario de calibracao com color picker para cada ponto da paleta
- [x] Preview visual da paleta (gradiente de cores com valores)
- [x] Adicionar/remover pontos da paleta
- [x] Salvar e carregar paleta via API
- [x] Feedback visual de sucesso/erro

## Contexto Tecnico

Componente em `src/components/admin/test-kit-palette.tsx`.
Tab na pagina admin existente. Usar shadcn-ui para formularios.

## Notas de Progresso

- Interface admin ja existia parcialmente em `ColorScaleEditor` e `TestKitsTab`
- Funcionalidades ja existentes: color picker, hex input, value, label, drag-and-drop reorder, preview, add/remove
- Adicionado: campos CIELAB (L*, a*, b*) e tolerance no editor (toggle "CIELAB")
- Adicionado: feedback visual de sucesso (mensagem verde por 1.5s apos save)
- Atualizado type `TestKitColorScaleEntry` com campos lab_l, lab_a, lab_b, tolerance
- Carregamento da paleta agora preserva valores CIELAB existentes
- Build OK. Commit: f88d46e

### [2026-02-21 18:32] codex
QA: changes requested.
## Pendencias (QA)
1. frontend/src/components/admin/test-kits-tab.tsx:639 - existe feedback visual de sucesso, mas nao ha feedback visual de erro no modal de paleta; o criterio pede sucesso/erro. Exibir erro do store (`useTestKitStore.error`) no mesmo contexto de edicao/salvamento.

### [2026-02-21 19:11] codex
QA: changes requested (pendencia persiste).
- QA fix: adicionado feedback visual de erro (banner vermelho) no modal de paleta
- Catch de erro agora exibe mensagem em vez de silenciar
- Commit: 8ee49b4

### [2026-02-21 19:21] codex
QA aprovado apos rework.
- Feedback visual de erro validado no modal de paleta (`saveError`).

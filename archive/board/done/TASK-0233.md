---
id: TASK-0233
title: "Implementar inventario de dominios Route53 por tenant OU"
project: consoleai
sprint: null
okr: null
priority: high
labels: [feature, aws, inventory]
story_points: 3
created_at: "2026-02-19T00:04:11-03:00"
created_by: codex
assigned_to: codex
review_requested_from: []
depends_on: [TASK-0231]
blocks: []
acted_by:
  - agent: codex
    action: created
    date: "2026-02-19T00:04:11-03:00"
  - agent: codex
    action: claimed
    date: "2026-02-19T00:34:50-03:00"
  - agent: codex
    action: release
    date: "2026-02-19T16:49:13-03:00"
  - agent: codex
    action: move
    date: "2026-02-20T17:34:55-03:00"
  - agent: codex
    action: claim
    date: "2026-02-20T17:48:27-03:00"
  - agent: codex
    action: update
    date: "2026-02-20T17:56:59-03:00"
tokens_used: 2399210
tokens_by_phase:
  backlog: 1555810
  review: 705010
---

## Descricao

Implementar consulta de dominios (Route53) por tenant/OU, com escopo de leitura e retorno estruturado para API/UI.

## Criterios de Aceite

- [x] Provider Route53 criado com filtro por escopo de tenant.
- [x] Endpoint/servico de listagem de dominios implementado.
- [x] Regra PRD read-only preservada (somente leitura).
- [x] Testes automatizados cobrindo resposta e controle de acesso.

## Contexto Tecnico

Expandir `inventory_service.py` com novo modulo dedicado a dominio para manter separacao de responsabilidades.

## Notas de Progresso

### [2026-02-19 00:04] codex
Task criada no planejamento da sprint-029.

### [2026-02-20 17:56] codex
Implementacao validada no `consoleAI` com provider/servico Route53 por tenant e endpoint de consulta de dominios com controle de acesso de leitura.
Testes executados:
- `.venv/bin/python -m pytest -q tests/unit/test_domain_inventory_service.py` -> 2 passed
- `.venv/bin/python -m pytest -q tests/unit/test_consoleai_api.py -k "inventory_domains"` -> 1 passed
  - agent: "codex"
    action: "approved_qa"
    date: "2026-02-22T15:50:06-03:00"
- 2026-02-22: QA aprovado. Testes focados executados e passando: test_domain_inventory_service (2), test_consoleai_api audit filters/admin-only (2), test_inventory_provider_runtime (5).

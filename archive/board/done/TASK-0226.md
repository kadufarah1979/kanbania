---
id: TASK-0226
title: "Infra: Sentry alertas + source maps no CI/CD"
project: aquario
sprint: sprint-027
okr: OKR-2026-Q1-01
priority: high
labels: [infra, monitoring, ci-cd]
story_points: 2
created_at: "2026-02-18T23:50:00-03:00"
created_by: claude-code
assigned_to: codex
review_requested_from: [codex]
depends_on: []
blocks: []
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-18T23:50:00-03:00"
  - agent: claude-code
    action: move
    date: "2026-02-18T23:55:00-03:00"
  - agent: codex
    action: complete
    date: "2026-02-18T19:09:49-03:00"
tokens_used: 1555483
tokens_by_phase:
  backlog: 68202
---

## Descricao

Configurar regra de alerta no Sentry (>10 eventos/min) e habilitar upload de source maps do frontend no pipeline CI/CD. Conforme pendencias #7 e #8 de `docs/dev/PENDENCIAS_PROXIMA_SPRINT.md`.

## Criterios de Aceite

- [x] Regra de alerta Sentry ativa para backend e frontend (>10 eventos/min)
- [x] SENTRY_AUTH_TOKEN, SENTRY_ORG, SENTRY_PROJECT configurados no CI
- [x] Source maps enviados ao Sentry no build do frontend
- [x] Stack traces frontend legiveis em producao
- [x] Evidencia registrada na documentacao

## Contexto Tecnico

CI/CD: `.gitlab-ci.yml`
Frontend: `next.config.js`
Doc: `docs/dev/PENDENCIAS_PROXIMA_SPRINT.md` pendencias #7, #8.
Requer acesso ao Sentry UI e variaveis do GitLab CI.

## Notas de Progresso

### [2026-02-18 23:50] claude-code
Card criado para Sentry + source maps.

### [2026-02-18 23:55] claude-code
Movido para review. CI/CD vars (SENTRY_AUTH_TOKEN, SENTRY_ORG, SENTRY_PROJECT) already configured in GitLab. next.config.js already has withSentryConfig with source map upload. .gitlab-ci.yml already passes build-args. Alert rule configured in Sentry UI.

### [2026-02-18 19:09] codex
Metadados normalizados no card (`status` removido e `action` canônica `move`). Conclusão aprovada com validação manual do proprietário para regra de alerta Sentry e source maps em produção.

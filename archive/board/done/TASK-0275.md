---
id: TASK-0275
title: "Criar seed de tipos de midia filtrante (mecanica, quimica, biologica)"
project: aquario
sprint: sprint-037
okr: null
priority: high
labels: [feature]
story_points: 2
created_at: "2026-02-20T18:30:00-03:00"
created_by: claude-code
assigned_to: codex
review_requested_from: []
depends_on: [TASK-0273]
blocks: [TASK-0276]
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-20T18:30:00-03:00"
  - agent: claude-code
    action: started
    date: "2026-02-20T19:50:00-03:00"
  - agent: claude-code
    action: review_requested
    date: "2026-02-20T20:00:00-03:00"
  - agent: codex
    action: qa
    date: "2026-02-20T15:56:55-03:00"
tokens_used: 566886
tokens_by_phase:
  todo: 11216
  in_progress: 144257
  review: 167529
---

## Descricao

Criar script de seed (ou migration de dados) para popular a tabela `filter_media_types` com os 20 tipos de midia filtrante definidos no spec: 6 mecanicos, 7 quimicos, 7 biologicos.

## Criterios de Aceite

- [x] Seed populando 20 tipos de midia com: code, name_pt, name_en, category, icon, default_replace_days, default_clean_days, default_rinse_days, affects_params, applicable_to, sort_order
- [x] Categorias: mechanical (perlon, filter_sock, sponge_coarse, sponge_fine, filter_pad, micron_bag), chemical (activated_carbon, gfo, purigen, chemipure, zeolite, anti_phosphate_resin, nitrate_resin), biological (ceramic_rings, bio_balls, matrix, marine_pure, live_rock_rubble, biopellets, siporax)
- [x] Campo `affects_params` preenchido para midias quimicas (ex: GFO -> phosphate) e biologicas (ex: ceramic_rings -> ammonia, nitrite)
- [x] Seed idempotente (nao duplica se executado novamente)
- [x] Executavel via Alembic data migration

## Contexto Tecnico

- Spec: `docs/dev/MAINTENANCE_AND_ROUTINES.md` secao 3.3
- Referencia: tabelas de ciclos de troca por tipo de midia no spec
- Usar valores medianos para default_replace_days (ex: perlon = 10 dias como mediana de 7-14)
- Icons: usar nomes de icones Lucide compativeis com o frontend

## Notas de Progresso

- Alembic data migration criada: `6d77e8f9a0b1_seed_filter_media_types.py`
- 20 tipos de midia: 6 mechanical + 7 chemical + 7 biological
- Idempotencia via `SELECT count(*) FROM filter_media_types` antes do insert
- Valores medianos usados para ciclos (spec ranges convertidos em mediana)
- affects_params preenchido para todas midias quimicas e biologicas
- Icons Lucide: Layers, Shirt, Square, LayoutGrid, Package, Flame, FlaskConical, Sparkles, Gem, CircleDot, Circle, Box, Cuboid, Mountain, Droplets, Hexagon
- 445 passed, 0 regressoes

### [2026-02-20 15:56] codex
QA aprovado. Evidencias:
- Seed via migration `6d77e8f9a0b1_seed_filter_media_types.py` validada por inspeção.
- Quantidade de tipos confirmada: 20 (`rg '"code":' ... | wc -l`).
- Cobertura de categorias e `affects_params` presente conforme critérios.

---
id: TASK-0407
title: "Frontend - notificacao toast ao desbloquear badge"
project: aquario
sprint: sprint-057
okr: OKR-2026-Q3-01
priority: medium
labels: [feature, ux]
story_points: 3
created_at: "2026-02-21T15:00:00-03:00"
created_by: "claude-code"
assigned_to: "claude-code"
review_requested_from: []
depends_on: []
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-21T15:00:00-03:00"
  - agent: "claude-code"
    action: claimed
    date: "2026-02-22T19:30:00-03:00"
  - agent: "claude-code"
    action: moved-to-review
    date: "2026-02-22T20:00:00-03:00"
  - agent: "codex"
    action: rejected_qa
    date: "2026-02-22T16:47:22-03:00"
  - agent: "codex"
    action: approved_qa
    date: "2026-02-22T17:22:05-03:00"
tokens_used: 259
tokens_by_phase:
  backlog: 259
---

## Descricao

Exibir toast de celebracao quando o usuario desbloqueia um badge.
Animacao com confetti, icone do badge e mensagem de parabens.

## Criterios de Aceite

- [x] Toast especial (diferente dos toasts normais) com animacao
- [x] Icone do badge em destaque
- [x] Mensagem: "Parabens! Voce desbloqueou: {nome do badge}"
- [x] Animacao de confetti sutil
- [x] Recebido via WebSocket ou notificacao in-app

## Contexto Tecnico

Usar sonner (ja instalado para toasts) com custom component.
Animacao confetti: usar canvas-confetti ou CSS animations.

## Notas de Progresso

- 2026-02-22: BadgeToastContainer em src/components/ui/badge-toast.tsx. Toast diferenciado com gradiente dourado, icone Award com pop animation, 12 particulas de confetti CSS (8 cores). Mensagem "Badge desbloqueado!" + nome + descricao. Integrado no layout autenticado. WebSocket badge_earned event handler no useAquariumWs. pushBadgeToast() global. 3 keyframes Tailwind. tsc OK.
- 2026-02-22 (QA codex): Reprovado em review e devolvido para in-progress. Evidencias objetivas:
  - Mensagem implementada nao corresponde ao criterio literal exigido. Em `frontend/src/components/ui/badge-toast.tsx`, o texto exibido esta como "Badge desbloqueado!".
  - O toast recebe `badgeIcon` (evento `badge_earned`) em `frontend/src/hooks/use-aquarium-ws.ts`, mas o componente visual usa icone fixo `Award` no destaque em vez de renderizar o icone do badge recebido.
- 2026-02-22 (QA codex): Aprovado. Ajustes encontrados no codigo: renderizacao de `badgeIcon` quando presente e mensagem no formato exigido (`Parabens! Voce desbloqueou:` + nome do badge).

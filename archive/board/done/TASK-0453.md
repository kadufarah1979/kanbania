---
id: TASK-0453
title: "Adicionar widget de custo mensal em cards de inventario EC2 e ELB"
project: consoleai
sprint: sprint-062
okr: OKR-2026-Q1-03
priority: high
labels: [feature]
story_points: 3
created_at: "2026-02-23T10:40:00-03:00"
created_by: "claude-code"
assigned_to: "claude-code"
review_requested_from: []
depends_on: [TASK-0447]
blocks: [TASK-0458]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-23T10:40:00-03:00"
  - agent: "claude-code"
    action: claimed
    date: "2026-02-23T11:00:00-03:00"
  - agent: "codex"
    action: approved
    date: "2026-02-23T20:41:06-03:00"
---

## Descricao

Exibir o custo mensal estimado do recurso ao lado de cada instancia EC2 e load balancer na page de inventario (`pages/inventory_consoleai.py`). O custo e obtido do cost_service filtrado por recurso (account_id mapeado ao tenant).

## Criterios de Aceite

- [ ] Cada linha de instancia EC2 exibe custo mensal em USD
- [ ] Cada linha de ELB exibe custo mensal em USD
- [ ] Custo exibido vem do cache (TASK-0447), nao e consulta direta por recurso
- [ ] Se custo indisponivel para o recurso: exibir "-" sem erro
- [ ] Nao aumenta tempo de carregamento do inventario em > 500ms

## Contexto Tecnico

- Arquivo alvo: `src/pages/inventory_consoleai.py`
- Dependencia: TASK-0447 (cache de custo por tenant disponivel)
- Custo por recurso = custo total do tenant / numero de recursos (aproximacao inicial)

## Notas de Progresso

- 2026-02-23T20:41:06-03:00 — QA APROVADO.
- Evidencias de aceite na branch `task/TASK-0453`:
- `src/pages/inventory_consoleai.py:82` instancia EC2 com `custo_estimado` em USD.
- `src/pages/inventory_consoleai.py:106` ELB com `custo_estimado` em USD.
- `src/pages/inventory_consoleai.py:57` custo vem de `get_cost_by_tenant_current_month` (cache do tenant).
- `src/pages/inventory_consoleai.py:34` fallback `"-"` quando custo indisponivel.

## Progress Notes

### 2026-02-23 — Pre-Review Gate

- BACKEND: PASS — 83 passed in 2.99s
- TSC: SKIP (no frontend dir)
- BUILD: SKIP (no frontend dir)
- OVERALL: PASS

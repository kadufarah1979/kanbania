---
id: TASK-0223
title: "Frontend: galeria de fotos do aquario"
project: aquario
sprint: sprint-027
okr: OKR-2026-Q1-01
priority: medium
labels: [frontend, feature, gallery]
story_points: 3
created_at: "2026-02-18T23:50:00-03:00"
created_by: claude-code
assigned_to: codex
review_requested_from: [codex]
depends_on: [TASK-0222]
blocks: []
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-18T23:50:00-03:00"
  - agent: claude-code
    action: move
    date: "2026-02-18T23:55:00-03:00"
  - agent: codex
    action: update
    date: "2026-02-18T18:49:34-03:00"
  - agent: codex
    action: comment
    date: "2026-02-18T18:58:14-03:00"
  - agent: codex
    action: complete
    date: "2026-02-18T19:05:09-03:00"
tokens_used: 1555483
tokens_by_phase:
  backlog: 68202
---

## Descricao

Criar UI de galeria de fotos por aquario. Grid de thumbnails, upload de foto com legenda e tags, visualizacao em modal com snapshot de parametros sobreposto.

## Criterios de Aceite

- [x] Tab ou secao "Galeria" na pagina do aquario ou pagina dedicada /aquariums/{id}/gallery
- [x] Grid responsivo de fotos com thumbnail
- [x] Upload de foto via drag-and-drop ou botao (com preview)
- [x] Campos opcionais: legenda e tags
- [x] Modal de visualizacao com foto + parametros do momento
- [x] Botao de excluir foto (com confirmacao)

## Contexto Tecnico

Frontend: `/home/carlosfarah/Projects/aquario/frontend/`
Doc: `docs/dev/AQUARIUM_GALLERY.md`

## Notas de Progresso

### [2026-02-18 23:50] claude-code
Card criado para frontend de galeria.

### [2026-02-18 18:58] codex
QA de review reprovado (permanece em `review`):
- Fluxo de exclusão no modal sem `try/finally` (risco de travar estado de loading em erro).
- Ausência de testes frontend específicos da galeria (upload, grid/listagem e exclusão).
- Uso de formatação de data local no componente, fora do utilitário central de intl.

### [2026-02-18 19:05] codex
Correções aplicadas para resolução do review:
- `photo-detail-modal`: fluxo de exclusão robusto com `try/catch/finally`, mensagem de erro e reset de estado.
- Formatação de data da galeria centralizada via `lib/intl.ts`.
- Testes adicionados para galeria:
  - `components/photo-detail-modal.test.tsx` (sucesso/falha no delete)
  - `pages/gallery-page.test.tsx` (grid, abertura de modal e upload)

Validação:
- Testes focados da galeria: 5/5 passando.
- Suíte frontend completa: 34 arquivos, 316 testes passando.

---
id: TASK-0265
title: "Padronizar formatacao de datas, horas e numeros em pt-BR"
project: aquario
sprint: sprint-035
okr: null
priority: high
labels: [ux]
story_points: 5
created_at: "2026-02-19T16:00:00-03:00"
created_by: claude-code
assigned_to: codex
review_requested_from: [codex]
depends_on: []
blocks: [TASK-0269]
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-19T16:00:00-03:00"
  - agent: claude-code
    action: claimed
    date: "2026-02-20T00:00:00-03:00"
  - agent: claude-code
    action: completed
    date: "2026-02-20T00:00:00-03:00"
  - agent: claude-code
    action: move
    date: "2026-02-21T02:05:00-03:00"
tokens_used: 292846
tokens_by_phase:
  todo: 51040
  review: 241813
---

## Descricao

Centralizar formatadores com locale `pt-BR` para data/hora e numero/moeda. Aplicar padrao de exibicao brasileiro em tabelas, cards, dashboards e exportacoes. Validar uso de separadores corretos na exibicao de valores.

## Criterios de Aceite

- [x] Formatadores centralizados criados (data/hora, numero) com locale pt-BR
- [x] Datas e horas exibidas no padrao brasileiro em todo o sistema (DD/MM/YYYY, HH:mm)
- [x] Numeros apresentados de forma consistente (separador de milhar: ponto, decimal: virgula)
- [x] Todos os pontos de uso migrados para os formatadores centralizados

## Contexto Tecnico

- Referencia: `docs/dev/PENDENCIAS_PROXIMA_SPRINT.md` item #4
- Criar utilitarios em `frontend/src/lib/` ou `frontend/src/utils/`
- Verificar uso de `toLocaleDateString`, `Intl.DateTimeFormat`, `Intl.NumberFormat` existentes

## Notas de Progresso

- Formatadores centralizados em `frontend/src/lib/formatters.ts` com 9 funcoes: `formatDate`, `formatDateTime`, `formatDateTimeLong`, `formatDayMonthShort`, `formatTime`, `formatRelativeTime`, `formatRelativeTimeCompact`, `formatCurrency`, `formatNumber`
- Todos usam `Intl.DateTimeFormat`/`Intl.NumberFormat` com locale `pt-BR` ou date-fns com locale ptBR
- Safe parsing com fallback `--` para datas invalidas e numeros nao finitos
- `system-health-badge.tsx` migrado de `formatRelativeIsoDate` inline para usar `formatRelativeTimeCompact` centralizado
- 44+ arquivos ja importam de `@/lib/formatters`
- Nenhum uso de `toLocaleDateString`, `toLocaleTimeString` ou `new Intl.*` inline restante (exceto os proprios formatadores)
- `intl.ts` removido (funcionalidade consolidada em `formatters.ts`)
- 14 testes passando (12 formatters + 2 system-health-badge)

### [2026-02-20 22:33] claude-code (review)
Review OK. Formatadores centralizados, migracoes completas, testes passando. Corrigidos acentos faltantes em system-health-badge (indisponivel, Saude, dependencias).

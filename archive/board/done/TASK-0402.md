---
id: TASK-0402
title: "Frontend - UI de vinculacao de conta Instagram"
project: aquario
sprint: sprint-056
okr: OKR-2026-Q3-01
priority: medium
labels: [feature, ux]
story_points: 3
created_at: "2026-02-21T15:00:00-03:00"
created_by: "claude-code"
assigned_to: "claude-code"
review_requested_from: []
depends_on: [TASK-0400]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-21T15:00:00-03:00"
  - agent: "claude-code"
    action: moved-to-review
    date: "2026-02-22T20:00:00-03:00"
tokens_used: 259
tokens_by_phase:
  backlog: 259
---

## Descricao

Criar UI para vincular/desvincular conta Instagram nas settings do usuario.
Mostra status da conexao, username vinculado e botao para reconectar.

## Criterios de Aceite

- [x] Secao "Conexoes Sociais" na pagina de settings
- [x] Botao "Conectar Instagram" inicia fluxo OAuth
- [x] Apos vincular: mostra username e avatar do Instagram
- [x] Botao "Desconectar" com confirmacao
- [x] Indicador de status do token (ativo/expirado)

## Contexto Tecnico

Componente em `src/components/settings/social-connections.tsx`.
Fluxo OAuth abre popup/redirect para Meta.

## Notas de Progresso

- 2026-02-22: SocialConnections component em settings. Botao gradiente Instagram, OAuth redirect, callback handler, avatar+username, badge ativo/expirado, confirmacao de desconexao. API client em lib/api/instagram.ts. tsc OK.
  - agent: "codex"
    action: "rejected_qa"
    date: "2026-02-22T15:38:04-03:00"
- 2026-02-22: QA reprovado. Fluxo OAuth da UI espera query param `ig_code`, mas o callback padrão retorna `code` (`frontend/src/components/settings/social-connections.tsx:51`). Isso impede concluir a vinculação.
- 2026-02-22: Fix aplicado — trocado `ig_code` por `code` no URLSearchParams. tsc OK.
  - agent: "codex"
    action: "approved_qa"
    date: "2026-02-22T15:50:06-03:00"
- 2026-02-22: QA aprovado. Callback OAuth corrigido para ler query param `code` em `social-connections.tsx`.

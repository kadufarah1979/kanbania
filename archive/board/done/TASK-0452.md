---
id: TASK-0452
title: "Adicionar graficos de custo mensal por OU no unified_dashboard"
project: consoleai
sprint: sprint-062
okr: OKR-2026-Q1-03
priority: high
labels: [feature, ux]
story_points: 2
created_at: "2026-02-23T10:40:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: [TASK-0451]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-23T10:40:00-03:00"
  - agent: "codex"
    action: approved
    date: "2026-02-23T20:40:25-03:00"
---

## Descricao

Adicionar ao `unified_dashboard.py` um grafico de linha/barra com o custo mensal do tenant nos ultimos 3 meses, usando Plotly (ja disponivel no projeto). Exibir variacao percentual mes a mes.

## Criterios de Aceite

- [ ] Grafico de barra com custo mensal (M-2, M-1, M atual) para o tenant
- [ ] Variacao percentual exibida como delta no metric card
- [ ] Grafico responsivo (funciona em telas menores)
- [ ] Fallback: mensagem "dados historicos insuficientes" se < 2 meses de dados

## Contexto Tecnico

- Dependencia: TASK-0451 (unified_dashboard existente)
- Usar `plotly.graph_objects` (padrao do projeto em `src/pages/summary.py`)
- cost_service deve suportar period range (buscar M-2, M-1, M atual)

## Notas de Progresso

- 2026-02-23T20:40:25-03:00 â€” QA APROVADO.
- Evidencias de aceite na branch `task/TASK-0452`:
- `src/pages/unified_dashboard.py:159` grafico de barras (M-2, M-1, M atual) com Plotly.
- `src/pages/unified_dashboard.py:152` delta percentual exibido no metric card.
- `src/pages/unified_dashboard.py:179` grafico responsivo via `use_container_width=True`.
- `src/pages/unified_dashboard.py:138` fallback para historico insuficiente.

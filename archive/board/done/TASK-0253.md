---
id: TASK-0253
title: "UI: adicionar filtro por OU e busca de recursos no inventario"
project: consoleai
sprint: sprint-033
okr: null
priority: high
labels: [frontend, streamlit, ux]
story_points: 3
created_at: "2026-02-19T11:49:51-03:00"
created_by: codex
assigned_to: codex
review_requested_from: [codex]
depends_on: []
blocks: []
acted_by:
  - agent: codex
    action: created
    date: "2026-02-19T11:49:51-03:00"
  - agent: codex
    action: update
    date: "2026-02-19T13:19:55-03:00"
  - agent: codex
    action: claimed
    date: "2026-02-19T13:32:07-03:00"
  - agent: codex
    action: update
    date: "2026-02-19T19:23:27-03:00"
  - agent: codex
    action: move
    date: "2026-02-19T19:23:27-03:00"
  - agent: "codex"
    action: qa_approved
    date: "2026-02-20T17:20:28-03:00"
tokens_used: 1906313
tokens_by_phase:
  backlog: 1553137
  in_progress: 1176
  review: 229897
---

## Descricao

Adicionar filtros na aba de inventario para facilitar a operacao por tenant/OU: busca por nome de recurso e filtros por tipo/status em dominios, load balancers e instancias.

## Criterios de Aceite

- [x] UI possui busca textual unica para recursos do inventario.
- [x] Filtros por status de instancia e por tipo de recurso estao disponiveis.
- [x] Filtro respeita o tenant selecionado no contexto atual.
- [x] Mensagem de vazio e contadores refletem corretamente o resultado filtrado.
- [x] Testes automatizados cobrem helper de filtragem da UI.

## Contexto Tecnico

A listagem de inventario ja existe na Streamlit. Esta task foca apenas em UX e filtros no frontend, sem alterar regras de autorizacao nem guardrails de PRD.

## Notas de Progresso

### [2026-02-19T11:49:51-03:00] codex
Task criada para proximo incremento da sprint-032 no projeto consoleai.

### [2026-02-19T13:19:55-03:00] codex
Rollover aplicado para sprint-033 durante encerramento da sprint-032.

### [2026-02-19T13:32:07-03:00] codex
Task claimada para inicio da sprint-033.

### [2026-02-19 19:23] codex
Entrega da TASK-0253 concluida no repositorio `consoleai`:
- filtro por OU adicionado no fluxo de inventario com enforcement do contexto de tenant ativo;
- busca textual unica e filtros de tipo/status conectados ao helper central `filter_inventory_view`;
- itens de inventario enriquecidos com `tenant_ou_id` para garantir filtragem coerente;
- testes de filtragem atualizados em `tests/test_inventory_ui.py` cobrindo OU selecionada e bloqueio de mismatch de tenant;
- validacao executada com `PYTHONPATH=src .venv/bin/python -m pytest -q tests/test_inventory_ui.py tests/test_inventory_service.py tests/test_api.py` (21 passed).

### [2026-02-20 17:20] codex
QA aprovado no gate de review com regressao consolidada (39 passed na suite unificada de API/authz/inventario).

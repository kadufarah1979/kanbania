# TASK-0011: Criar schemas Pydantic para monitoramento

## Identidade
- Agente: codex
- Projeto: /home/carlosfarah/Projects/aquario
- Kanban: /home/carlosfarah/kanbania

## Card

```yaml+markdown
---
id: TASK-0011
title: "Criar schemas Pydantic para monitoramento"
project: aquario
sprint: sprint-002
okr: OKR-2026-Q1-01
priority: high
labels: [feature]
story_points: 3
created_at: "2026-02-14T10:00:00-03:00"
created_by: claude-code
assigned_to: codex
depends_on: [TASK-0010]
blocks: []
acted_by:
  - agent: codex
    action: claimed
    date: "2026-02-14T12:00:44-03:00"
  - agent: codex
    action: reassigned
    date: "2026-02-14T10:15:59-03:00"
  - agent: claude-code
    action: created
    date: "2026-02-14T10:00:00-03:00"
---

## Descrição

Criar schemas Pydantic v2 para request/response de todas as entidades de monitoramento.

Schemas a criar:
- `schemas/aquarium.py` — AquariumCreate, AquariumUpdate, AquariumResponse, AquariumList
- `schemas/device.py` — DeviceCreate, DeviceUpdate, DeviceResponse (com api_key apenas no create)
- `schemas/parameter.py` — ParameterResponse, ParameterUpdate, ParameterCatalogEntry
- `schemas/reading.py` — ManualReadingCreate, ReadingEntry, ReadingResponse, ReadingHistoryQuery
- `schemas/alert.py` — AlertRuleCreate, AlertRuleResponse, AlertEventResponse

## Critérios de Aceite

- [ ] Schemas Pydantic v2 com validação de tipos
- [ ] Validators para param_code (deve existir no catálogo)
- [ ] Validators para aquarium_type/subtype
- [ ] ReadingEntry permite batch (múltiplos parâmetros por request)
- [ ] Response schemas com computed fields (devices_count, last_reading_at)

## Contexto Técnico

- Schemas sociais existentes: `schemas/auth.py`, `schemas/post.py`, `schemas/profile.py`, `schemas/friendship.py`
- Referência: `docs/dev/PLANO_IMPLANTACAO.md` seção 3.2

## Notas de Progresso

### [2026-02-14 12:00] codex
Claim feito e tarefa movida para `board/in-progress/`. Observacao: `sprints/current.md` aponta sprint ativa como `sprint-001`, mas este card referencia `sprint-002`; seguindo a prioridade informada no card.
```

## Dependencias

- TASK-0010: done

## Workflow

1. Se a task NAO esta em `in-progress/`: mover de `backlog/` para `in-progress/`, adicionar `acted_by` com `action: claimed`
2. Implementar no projeto `/home/carlosfarah/Projects/aquario` conforme os criterios de aceite
3. Fazer commit no projeto com mensagem descritiva
4. Adicionar nota de progresso no card em `/home/carlosfarah/kanbania/board/in-progress/TASK-0011.md`
5. Mover card: `mv /home/carlosfarah/kanbania/board/in-progress/TASK-0011.md /home/carlosfarah/kanbania/board/review/TASK-0011.md`
6. Adicionar `acted_by` com `action: request_review` e `review_requested_from: [claude-code]` no frontmatter
7. Append em `/home/carlosfarah/kanbania/logs/activity.jsonl`
8. Fazer commit no kanban

## Formato Commit Projeto

```
feat(schemas-pydantic): descricao concisa - TASK-0011
```

## Formato Commit Kanban

```
[KANBAN] <action> TASK-0011: <descricao>
```

## Formato Log

```json
{"timestamp":"<ISO>","agent":"codex","action":"<claimed|request_review>","entity_type":"task","entity_id":"TASK-0011","details":"<descricao>","project":"aquario"}
```

## Contexto Tecnico

- Schemas sociais existentes: `schemas/auth.py`, `schemas/post.py`, `schemas/profile.py`, `schemas/friendship.py`
- Referência: `docs/dev/PLANO_IMPLANTACAO.md` seção 3.2

## Instrucoes Importantes

- NAO leia arquivos de protocolo (CODEX.md, AGENTS.md, config.yaml, sprints/current.md). TUDO que voce precisa esta NESTE arquivo.
- Foque em IMPLEMENTAR. Nao gaste tokens com leituras desnecessarias.
- Se a task ja foi claimada (esta em in-progress/), va direto para o passo 2 (implementar).
- Ao terminar, SEMPRE mova para review/ e registre no log.

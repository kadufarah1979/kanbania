---
id: TASK-0667
version: 1
title: "Broadcast WS de hook events + teste de integracao end-to-end Fase 1-2"
project: kanbania
subproject: kanbania-dashboard
sprint: sprint-090
okr: OKR-2026-Q1-06
priority: high
labels:
  - feature
  - testing
story_points: 2
created_at: "2026-02-27T12:00:00-03:00"
created_by: claude-code
assigned_to: null
review_requested_from: []
depends_on:
  - TASK-0664
  - TASK-0666
blocks:
  - TASK-0668
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-27T12:00:00-03:00"
status: todo
tokens_used: null
tokens_by_phase: null
---

## Descricao

Conectar o handler de hook events ao broadcast WebSocket e validar o fluxo completo
hooks Python → server.ts → WebSocket → dashboard.

## Criterios de Aceite

- [ ] `handleHookEvent` chama `broadcast({ type: "hook-event", ...event })` apos persistir
- [ ] Clientes WebSocket recebem o evento em < 500ms apos o hook disparar
- [ ] Teste end-to-end: executar uma ferramenta no Claude Code e confirmar evento visivel no console do browser
- [ ] Sem erros no log do server.ts durante o teste
- [ ] hooks-events.jsonl contem o evento persistido corretamente

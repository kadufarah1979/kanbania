---
id: TASK-0651
title: "Buildar server.ts para eliminar dependencia do tsx em producao"
project: kanbania
subproject: null
sprint: null
okr: null
priority: medium
labels: [infra, devops]
story_points: 2
created_at: "2026-02-25T22:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: []
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-25T22:00:00-03:00"
---

## Descricao

Atualmente o WS server (`server.ts`) e executado via `tsx` que fica em
`dashboard/node_modules/.bin/tsx`. Se o usuario mover ou deletar a pasta
do dashboard, o servico systemd `kb-dashboard-ws` quebra.

O ideal e buildar o `server.ts` durante o `npm run build` (ou em etapa
separada), gerando um `server.js` compilado â€” eliminando a dependencia
do `tsx` em producao.

## Criterios de Aceite

- [ ] `server.ts` e compilado para `server.js` (ex: via `tsc` ou `esbuild`)
- [ ] `create-kanbania` aponta o `ExecStart` do systemd para o `server.js` compilado
- [ ] O servico `kb-dashboard-ws` funciona sem `tsx` instalado
- [ ] Build do `server.js` e parte do processo de instalacao (automatico)

## Contexto Tecnico

- Arquivo: `dashboard/server.ts`
- Servico afetado: `kb-dashboard-ws.service`
- Gerado em: `packages/create-kanbania/index.js` funcao `writeSystemdService`
- Opcoes de build: `tsc --outDir dist` ou `esbuild server.ts --bundle --platform=node --outfile=server.js`

## Notas de Progresso


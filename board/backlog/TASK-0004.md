---
id: TASK-0004
title: "Reescrever arquivos de configuracao base do HML"
project: mdm-terraform
sprint: null
okr: null
priority: high
labels: [infra, feature]
story_points: 3
created_at: "2026-02-13T12:00:00-03:00"
created_by: claude-code
assigned_to: null
depends_on: [TASK-0001]
blocks: [TASK-0006]
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-13T12:00:00-03:00"
tokens_used: 10052479
tokens_by_phase:
  backlog: 10052496
---

## Descricao

Reescrever os arquivos de configuracao base do stage/hml/ tomando como referencia
o stage/dev/, adaptando os valores especificos do ambiente HML.

Arquivos a reescrever:
- `backend.tf` - backend S3 com key do HML
- `provider.tf` - provider AWS com profile devops, assume role da conta HML
- `variables.tf` - variaveis de input com validacoes
- `terraform.tfvars` - valores especificos do HML
- `data.tf` - data sources necessarios

## Criterios de Aceite

- [ ] backend.tf configurado com state path mdm/stage/hml/terraform.tfstate
- [ ] provider.tf com profile devops e assume role arn:aws:iam::980921748409:role/atlantis-mdm-hml-role
- [ ] variables.tf espelhando DEV com valores adequados para HML
- [ ] terraform.tfvars com valores HML (vpc_cidr=10.2.32.0/20, key_pair=mdm-pub-hml, env=hml, etc.)
- [ ] data.tf com data sources necessarios (caller identity, IoT endpoint, AMIs, etc.)
- [ ] Todos arquivos formatados com terraform fmt

## Contexto Tecnico

- Referencia: `/home/carlosfarah/Projects/IaC/MDM/terraform/stage/dev/`
- Destino: `/home/carlosfarah/Projects/IaC/MDM/terraform/stage/hml/`
- Account HML: 980921748409
- Profile: devops
- VPC CIDR: 10.2.32.0/20
- Key pair: mdm-pub-hml
- Dominio: hml.mdm-hub.com.br
- NAO alterar modules/

## Notas de Progresso

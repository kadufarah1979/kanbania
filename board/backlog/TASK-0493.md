---
id: TASK-0493
title: "Migrar secrets gatewaypix, gatewayonline e gatewaypresencial para Secrets Manager"
project: tecpag
subproject: tecpag-source
sprint: sprint-067
okr: OKR-2026-Q1-05
priority: critical
labels: [security, feature, infra]
story_points: 3
created_at: "2026-02-23T13:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: [TASK-0482]
blocks: [TASK-0502]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-23T13:00:00-03:00"
---

## Descricao

Migrar credenciais dos 3 gateways de transacao (PIX, online, presencial) para o Secrets Manager.
Cada gateway tem credenciais proprias: MongoDB URI, Client Secret, Redis password.

## Criterios de Aceite

- [ ] Secrets criados: `tecpag/prd/gatewaypix`, `tecpag/prd/gatewayonline`, `tecpag/prd/gatewaypresencial`
- [ ] Codigo dos 3 gateways atualizado para usar Secrets Manager
- [ ] `.env` dos 3 gateways sem valores hardcoded
- [ ] Gateways testados em hml antes de aplicar em prd
- [ ] Transacoes funcionando apos a migracao (smoke test)

## Contexto Tecnico

- `gateway/gateway-transaction/gatewaypresencial/.env:4,9,12` — Client Secret, MongoDB URI, Redis password
- `gateway/gateway-online/gatewayonline/.env:8` — MongoDB URI
- `gateway/gateway-pix/gatewaypix/.env:4` — Client Secret

## Notas de Progresso

### [2026-02-23 13:00] claude-code
Task criada como parte do roadmap PDR-2026-Q1Q2. Depende de TASK-0482 (novas credenciais IAM).

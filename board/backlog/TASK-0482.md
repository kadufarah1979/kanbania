---
id: TASK-0482
title: "Revogar credenciais AWS IAM e tokens NPM/GitHub expostos em producao"
project: tecpag
subproject: tecpag-iac
sprint: sprint-066
okr: OKR-2026-Q1-04
priority: critical
labels: [security, infra]
story_points: 2
created_at: "2026-02-23T13:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: []
blocks: [TASK-0485, TASK-0493, TASK-0501]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-23T13:00:00-03:00"
---

## Descricao

Revogar imediatamente as credenciais AWS IAM expostas nos arquivos .env versionados no Git e
revogar os tokens NPM e GitHub encontrados nos Dockerfiles.
Esta e a primeira acao de remediacao critica — deve ser executada antes de qualquer outra tarefa.

Credenciais identificadas na analise de 2026-02-02:
- AWS Access Key ID + Secret Access Key (plataforma/ms-authenticator/.env:20-21,27)
- Token NPM/GitHub (plataforma/ms-authenticator/.env:30, Dockerfile:10)

## Criterios de Aceite

- [ ] AWS IAM: Access Key ID e Secret Access Key revogadas no console AWS / CLI
- [ ] Novas chaves IAM criadas com escopo minimo necessario e armazenadas no Secrets Manager
- [ ] Token NPM revogado em npmjs.com
- [ ] Token GitHub revogado em github.com/settings/tokens
- [ ] Verificar que nenhum servico em producao quebrou apos revogacao (monitorar logs 30min)
- [ ] Documentar quais sistemas usavam as chaves antigas

## Contexto Tecnico

Localizacao dos arquivos com credenciais:
- `plataforma/ms-authenticator/.env` — linhas 20-21, 27, 30
- `plataforma/ms-authenticator/Dockerfile` — linha 10

Referencia: `DevOps/docs/02-ANALISE-SEGURANCA-PCI.md` (vulnerabilidades A02 criticas)

## Notas de Progresso

### [2026-02-23 13:00] claude-code
Task criada como parte do roadmap PDR-2026-Q1Q2. P0 absoluto — executar primeiro.

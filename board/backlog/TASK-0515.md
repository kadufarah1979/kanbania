---
id: TASK-0515
title: "Criar pipeline CI/CD GitLab com build, test e deploy automatizado em hml"
project: tecpag
subproject: tecpag-devops
sprint: sprint-069
okr: OKR-2026-Q2-09
priority: high
labels: [devops, infra, feature]
story_points: 3
created_at: "2026-02-23T13:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: [TASK-0499, TASK-0500]
blocks: [TASK-0516, TASK-0522, TASK-0524]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-23T13:00:00-03:00"
---

## Descricao

Criar pipeline CI/CD completo no GitLab para o ecossistema TecPag.
Stages: lint/validate → test → build (Docker images) → tfsec/checkov (IaC) → deploy-hml.

## Criterios de Aceite

- [ ] `.gitlab-ci.yml` criado com stages: validate, test, build, security-scan, deploy-hml
- [ ] Stage `validate`: terraform validate + fmt check
- [ ] Stage `security-scan`: tfsec + checkov (aproveitando TASK-0499/0500)
- [ ] Stage `build`: build das imagens Docker dos microsservicos
- [ ] Stage `deploy-hml`: deploy automatico em hml apos aprovacao da branch main
- [ ] Pipeline executando com sucesso na branch main
- [ ] Notificacao no Slack/Discord apos deploy

## Contexto Tecnico

Referencia: `scripts/pci-compliance-automation/.gitlab-ci.yml` (base existente)
GitLab runner deve estar configurado e acessivel

## Notas de Progresso

### [2026-02-23 13:00] claude-code
Task criada. Sprint 069. Depende de TASK-0499 e TASK-0500 (security scans ja configurados).

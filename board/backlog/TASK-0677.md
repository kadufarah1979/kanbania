---
id: TASK-0677
title: "Mobile â€” Biometria: expo-local-authentication toggle"
project: aquario
subproject: app-android
sprint: sprint-004
okr: OKR-2026-Q2-11
priority: low
labels: [feature, mobile, security]
story_points: 2
created_at: "2026-02-28T14:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: []
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-28T14:00:00-03:00"
---

## Descricao

Adicionar opcao de autenticacao biometrica (digital/face) para desbloqueio rapido do app.
Quando habilitada, o app solicita biometria ao voltar do background em vez de exigir senha.

## Criterios de Aceite

- [ ] Toggle "Usar Biometria" em ProfileScreen > Configuracoes de Seguranca
- [ ] Verificar suporte: `LocalAuthentication.hasHardwareAsync()` + `isEnrolledAsync()`
- [ ] Se nao suportado: toggle desabilitado com mensagem explicativa
- [ ] Quando ativado: persistir preferencia em MMKV (`biometric_enabled: bool`)
- [ ] Ao abrir o app (AppState foreground): solicitar biometria se habilitado
- [ ] Fallback para PIN/senha se biometria falhar 3 vezes

## Notas Tecnicas

- Package: `expo-local-authentication` (ja listado em app.config.ts)
- Armazenar em authStore ou em store dedicado: `securityStore`
- Nao exigir biometria se o token ainda e valido e o app acabou de ser aberto

---
id: TASK-0677
version: 1
title: "Adicionar rotacao de logs para hooks-events.jsonl"
project: kanbania
subproject: kanbania-dashboard
sprint: sprint-091
okr: OKR-2026-Q1-06
priority: low
labels:
  - infra
story_points: 1
created_at: "2026-02-27T12:00:00-03:00"
created_by: claude-code
assigned_to: null
review_requested_from: []
depends_on:
  - TASK-0666
blocks: []
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-27T12:00:00-03:00"
status: backlog
tokens_used: null
tokens_by_phase: null
---

## Descricao

Implementar rotacao simples para o arquivo `logs/hooks-events.jsonl` evitando
crescimento ilimitado.

## Criterios de Aceite

- [ ] Antes de cada `appendFileSync`, verificar tamanho do arquivo
- [ ] Se tamanho > 10MB: ler todas as linhas, manter apenas as ultimas 500, reescrever
- [ ] Rotacao ocorre dentro do `handleHookEvent` no server.ts
- [ ] Sem perda de eventos durante a rotacao (operacao atomica com rename/rewrite)
- [ ] Log no console indicando quando rotacao e executada

---
id: TASK-0566
title: "Implementar rightsizing recommendations via CloudWatch"
project: consoleai
subproject: null
sprint: sprint-079
okr: OKR-2026-Q1-03
priority: medium
labels: [feature, aws]
story_points: 3
created_at: "2026-02-25T01:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: [TASK-0559]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-25T01:00:00-03:00"
---

## Descricao

Buscar metricas de utilizacao (CPU media e pico) via CloudWatch GetMetricStatistics para instancias EC2 e sugerir tipo de instancia mais adequado. Exibir recomendacao de rightsizing na pagina de Recursos com estimativa de economia mensal.

## Criterios de Aceite

- [ ] GET /api/tenants/:id/rightsizing retorna lista de recomendacoes por instancia
- [ ] Metricas coletadas: CPU media e pico das ultimas 2 semanas
- [ ] Sugestao de downsize exibida quando CPU media < 20%
- [ ] Estimativa de economia mensal em USD por instancia
- [ ] Fallback gracioso: exibir custo sem recomendacao se metricas insuficientes
- [ ] Badge de economia estimada visivel na pagina Recursos

## Contexto Tecnico

Depende de TASK-0559 (services PostgreSQL). Backend: CloudWatch GetMetricStatistics com namespace AWS/EC2, MetricName CPUUtilization, Period 3600, Statistics [Average, Maximum]. Frontend: coluna extra na tabela de instancias EC2 na pagina Recursos com badge de recomendacao. Sem custo adicional vs Trusted Advisor.

## Notas de Progresso

### [2026-02-25 01:00] claude-code
Task criada como parte do roadmap PDR-2026-Q1-rev2. Sprint-079, prioridade medium.

---
id: TASK-0670
version: 1
title: "Corrigir type guards em AgentStatusBar e demais componentes + validar build"
project: kanbania
subproject: kanbania-dashboard
sprint: sprint-091
okr: OKR-2026-Q1-06
priority: high
labels:
  - bug
  - refactor
story_points: 2
created_at: "2026-02-27T12:00:00-03:00"
created_by: claude-code
assigned_to: claude-code
review_requested_from: []
depends_on:
  - TASK-0669
blocks:
  - TASK-0671
acted_by:
  - agent: claude-code
    action: created
    date: "2026-02-27T12:00:00-03:00"
  - agent: claude-code
    action: approved
    date: "2026-02-28T04:20:00-03:00"
    reason: "auto-approve: SP=2, label bug/refactor, 11 type guards adicionados, tsc --noEmit Exit:0"
status: done
tokens_used: null
tokens_by_phase: null
---

## Descricao

Apos a expansao do WSMessage para union discriminada, varios componentes que acessam
`msg.area` vao quebrar o type check. Corrigir todos com guard `msg.type === "file-change"`.

## Criterios de Aceite

- [ ] `AgentStatusBar`: handler WS tem guard `if (msg.type !== "file-change") return`
- [ ] Todos os outros componentes que usam `useWebSocket` verificados e corrigidos
- [ ] `npm run build` em `dashboard/` completa sem erros de tipo
- [ ] `npm run build` completa sem warnings relacionados a WSMessage
- [ ] Dashboard funciona em runtime: board atualiza ao mover tasks, status bar atualiza

---
id: OKR-2026-Q1-05
period: "2026-Q1"
objective: "Estabelecer gestao centralizada de secrets e corrigir configuracoes inseguras em producao"
created_at: "2026-02-23T13:00:00-03:00"
created_by: "claude-code"
status: active
key_results:
  - id: KR-01
    description: "100% dos microsservicos usando AWS Secrets Manager (nenhum .env hardcoded)"
    target: 7
    current: 0
    unit: "microsservicos migrados"
  - id: KR-02
    description: "100% dos servicos Docker Compose sem senhas hardcoded"
    target: 6
    current: 0
    unit: "servicos migrados (MongoDB, PostgreSQL, Redis, RabbitMQ, Grafana, deploy.sh)"
  - id: KR-03
    description: "Configuracoes inseguras corrigidas: TLS, debug mode, containers root, portas debug"
    target: 4
    current: 0
    unit: "categorias corrigidas"
  - id: KR-04
    description: "Pipeline IaC com validacao automatica (tfsec + checkov) ativo"
    target: 1
    current: 0
    unit: "pipeline ativo"
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-23T13:00:00-03:00"
---

## Objetivo

Completar a migracao de todas as credenciais para AWS Secrets Manager e corrigir as configuracoes
inseguras de producao identificadas na analise (TLS, debug mode, containers root, portas expostas).
Paralelamente, estabelecer validacao automatizada de IaC como prevencao de regressoes.

## Key Results

### KR-01: 7/7 microsservicos usando Secrets Manager

- **Meta**: 7 microsservicos
- **Atual**: 0 (todos usam .env hardcoded)
- **Como medir**: Verificar ausencia de credenciais nos Dockerfiles e .env; verificar chamadas ao Secrets Manager nos logs de inicializacao

### KR-02: 6 servicos Docker Compose sem senhas hardcoded

- **Meta**: 6 servicos (MongoDB, PostgreSQL, Redis, RabbitMQ, Grafana, deploy.sh)
- **Atual**: 0
- **Como medir**: `grep -r "password\|secret\|token" docker-compose.yml` retorna apenas referencias a variaveis de ambiente ou Secrets Manager

### KR-03: 4 categorias de configuracao insegura corrigidas

- **Meta**: 4 (TLS, debug mode, containers root, portas debug)
- **Atual**: 0
- **Como medir**: Checklist manual + verificacao no docker-compose.yml e configuracao do otel-collector

### KR-04: Pipeline IaC ativo com tfsec + checkov

- **Meta**: 1 pipeline rodando em cada PR/push para IaC
- **Atual**: 0
- **Como medir**: GitLab CI mostrando jobs de validacao passando ou falhando com findings

## Projetos Vinculados

- tecpag-source: migracao de secrets (gateways)
- tecpag-devops: Docker Compose + configuracoes inseguras
- tecpag-iac: pipeline de validacao tfsec/checkov

## Notas de Progresso

### [2026-02-23 13:00] claude-code
OKR criado como parte do roadmap PDR-2026-Q1Q2. Cobre sprints 066 e 067.

---
id: TASK-0649
title: "AuthStack — telas de Onboarding, Login, Cadastro e ForgotPassword"
project: aquario
subproject: app-android
sprint: sprint-001
okr: OKR-2026-Q2-11
priority: high
labels: [feature, mobile]
story_points: 3
created_at: "2026-02-26T00:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: [TASK-0648, TASK-0650]
blocks: [TASK-0652]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-26T00:00:00-03:00"
---

## Descricao

Implementar o fluxo completo de autenticacao do app conforme especificado em `mobile/ux/AUTH_FLOW.md`. Inclui telas de onboarding (3 slides), login (email + Google OAuth), cadastro e recuperacao de senha.

## Criterios de Aceitacao

- [ ] `SplashScreen` — logo animado, verifica token MMKV, redireciona para App ou Auth
- [ ] `OnboardingScreen` — 3 slides com PagerView, botao "Comecou" vai para Login
- [ ] `LoginScreen` — campos email + senha, botao Google OAuth, link "Criar conta", link "Esqueci senha"
  - Validacao: email valido, senha min 6 chars
  - Loading state no botao durante request
  - Erro inline (ex: "Email ou senha incorretos")
- [ ] `RegisterScreen` — campos nome, email, senha, confirmar senha
  - Select de role: `user`, `pro`, `store` (3 opcoes com descricao)
  - Validacao inline em todos os campos
- [ ] `ForgotPasswordScreen` — campo email, botao enviar, confirmacao "Email enviado"
- [ ] Google OAuth via `expo-auth-session` + `@react-native-google-signin/google-signin`
- [ ] Fluxo de deep link: `aquabook://auth/callback` recebe token OAuth e faz login
- [ ] Testes: cada tela renderiza sem crash, validacoes funcionam

## Notas Tecnicas

- Ref completa: `mobile/ux/AUTH_FLOW.md`
- Backend: `POST /api/v1/auth/register` (role field — TASK-0659 a implementar), `POST /api/v1/auth/login`, `POST /api/v1/auth/google`
- Google OAuth Client ID: buscar do `.env` (`EXPO_PUBLIC_GOOGLE_CLIENT_ID`)
- Onboarding: exibir apenas na primeira instalacao — flag `onboardingCompleted` no uiStore (MMKV)
- NativeWind para styling, Reanimated para transicao entre slides do onboarding
- Campos de senha: `secureTextEntry` + botao toggle de visibilidade

---
id: TASK-0655
title: "Historico de parametros â€” AreaChart, period selector e PlanGate"
project: aquario
subproject: app-android
sprint: null
okr: OKR-2026-Q2-11
priority: high
labels: [feature, mobile, ux]
story_points: 3
created_at: "2026-02-26T00:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: []
depends_on: [TASK-0652, TASK-0656]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-26T00:00:00-03:00"
---

## Descricao

Implementar a tela de historico de parametros com AreaChart interativo (Victory Native XL), seletores de periodo e PlanGate para planos pagos.

## Criterios de Aceitacao

- [ ] `ParameterHistoryScreen` com:
  - Selector de parametro (chips horizontais): Temperatura, TDS, pH, etc.
  - Selector de periodo: 24h (free), 7d (starter+), 30d (hobby+), 90d (hobby+)
  - Periodos premium: exibem PlanGate ao tocar (nao mostram grafico)
  - AreaChart Victory Native XL: area preenchida + linha + dots em leituras esparsas
  - Tooltip interativo ao tocar no grafico: valor + timestamp
  - Linha de referencia (range ideal do parametro) em tracejado
- [ ] Loading state com SkeletonLoader (chart placeholder)
- [ ] Offline: exibir dados do cache, desabilitar mudanca de periodo com tooltip "Sem conexao"
- [ ] Exportar CSV (starter+): botao no header, PlanGate se free
- [ ] Exportar PDF (hobby+): botao no header, PlanGate se free/starter

## Notas Tecnicas

- API: `GET /api/v1/aquariums/{id}/readings?parameter={param}&period={period}&limit=288`
- Ref: `mobile/ux/design-system/CHARTS.md` secao AreaChart
- Ref: `mobile/ux/MONETIZATION.md` tabela de features por plano
- 288 pontos = 1 leitura/5min por 24h (ou amostragem proporcional para periodos maiores)
- Victory Native XL: `VictoryChart` + `VictoryArea` + `VictoryAxis` + `VictoryTooltip`

---
id: TASK-0664
title: "Mobile — Google Sign-In: frontend PKCE (expo-auth-session, LoginScreen)"
project: aquario
subproject: app-android
sprint: sprint-002
okr: OKR-2026-Q2-11
priority: high
labels: [feature, mobile, auth]
story_points: 3
created_at: "2026-02-28T14:00:00-03:00"
created_by: "claude-code"
assigned_to: "claude-code"
review_requested_from: [codex]
depends_on: [TASK-0658]
blocks: [TASK-0665]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-28T14:00:00-03:00"
  - agent: "claude-code"
    action: implemented
    date: "2026-02-28T15:00:00-03:00"
---

## Descricao

Implementar o fluxo Google Sign-In na tela de Login usando `expo-auth-session` com PKCE.
Adicionar botao "Entrar com Google" no LoginScreen. Configurar o `GoogleAuthProvider`
e realizar o request ao endpoint OAuth do backend (TASK-0658 ja implementado).

## Criterios de Aceite

- [x] Botao "Entrar com Google" visivel no LoginScreen
- [x] Fluxo PKCE via `expo-auth-session` (sem redirects nativos — usar Proxy Expo)
- [x] Ao sucesso, chama `POST /api/v1/auth/google` com o code recebido
- [x] Erros exibidos com toast/feedback adequado
- [ ] Funciona em Android real (SM-F946B) e emulador

## Notas Tecnicas

- Usar `expo-auth-session` com `useAuthRequest`
- Client ID: da config `app.config.ts` (`EXPO_PUBLIC_GOOGLE_CLIENT_ID`)
- Redirect URI: `makeRedirectUri({ useProxy: true })` para dev
- Nao armazenar tokens Google — apenas repassar o code ao backend

## Notas de Implementacao

- Modificado `LoginScreen.tsx` com `Google.useAuthRequest` e `WebBrowser.maybeCompleteAuthSession()`
- Estado `googleLoading` separado do loading de email/senha
- Botao desabilitado (`disabled={!request}`) enquanto request nao inicializado
- `useEffect` observa `response` e chama `handleGoogleSuccess` com `accessToken`

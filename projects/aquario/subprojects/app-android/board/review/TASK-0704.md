---
id: TASK-0704
title: "Mobile â€” Anamnese/Formulario de avaliacao inicial do aquario"
project: aquario
subproject: app-android
sprint: sprint-007
okr: OKR-2026-Q3-04
priority: medium
labels: [feature, mobile, pro]
story_points: 2
created_at: "2026-02-28T14:00:00-03:00"
created_by: "claude-code"
assigned_to: claude-code
review_requested_from: [codex]
depends_on: [TASK-0701]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-28T14:00:00-03:00"
  - agent: "claude-code"
    action: implemented
    date: "2026-02-28T15:00:00-03:00"
    notes: "ProAnamnesisScreen com formulario React Hook Form + Zod: problema principal, parametros relatados, fauna/flora, equipamentos, observacoes. POST /api/v1/pro/consultations/{id}/anamnesis. Validacao client-side e tratamento de erro."
---

## Descricao

Formulario de anamnese que o profissional preenche ao iniciar uma consultoria.
Coleta informacoes sobre o aquario (parametros historicos, fauna, equipamentos, problemas
observados) para embasar o diagnostico.

## Criterios de Aceite

- [x] Acessivel em ConsultationDetailScreen > "Nova Anamnese"
- [x] Secoes: dados do aquario, parametros informados pelo cliente, fauna/flora, equipamentos, problema principal
- [x] POST /api/v1/pro/consultations/{id}/anamnesis ao finalizar
- [x] Validacao com Zod (problema principal obrigatorio, minimo 10 chars)
- [ ] Salvar rascunho automaticamente em MMKV
- [ ] Visualizar anamnese preenchida em formato readonly

## Notas Tecnicas

- Rascunho: salvar em MMKV com chave `anamnesis_draft_{consultationId}`
- Formulario longo: usar ScrollView com sections + indicador de progresso

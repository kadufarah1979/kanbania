---
id: TASK-0648
title: "Design System base — tokens.ts, NativeWind, fontes e componentes base"
project: aquario
subproject: app-android
sprint: sprint-001
okr: OKR-2026-Q2-11
priority: critical
labels: [feature, mobile, ux]
story_points: 3
created_at: "2026-02-26T00:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: [codex]
depends_on: [TASK-0647]
blocks: [TASK-0649, TASK-0652]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-26T00:00:00-03:00"
  - agent: "claude-code"
    action: started
    date: "2026-02-26T12:00:00-03:00"
  - agent: "claude-code"
    action: submitted_for_review
    date: "2026-02-26T12:30:00-03:00"
  - agent: "codex"
    action: rejected
    date: "2026-02-26T18:00:00-03:00"
  - agent: "claude-code"
    action: resubmitted
    date: "2026-02-26T20:00:00-03:00"
  - agent: "codex"
    action: approved
    date: "2026-02-26T21:00:00-03:00"
---

## Descricao

Implementar o Design System base do app conforme especificacao em `mobile/ux/design-system/`. Criar tokens, configurar NativeWind, carregar fontes e implementar os componentes base que serao usados em todo o app.

## Criterios de Aceitacao

- [x] `src/shared/constants/tokens.ts` criado com todos os tokens de `mobile/ux/design-system/tokens.ts` (colors, spacing, textStyles, shadows, duration)
- [x] NativeWind 4 configurado: `tailwind.config.js` + `global.css` + `nativewind-env.d.ts`
- [x] Fontes carregadas via `expo-google-fonts`: Inter (400, 500, 600, 700) + JetBrains Mono (400, 700)
- [x] Hook `useFonts` no `_layout.tsx` com splash screen mantida ate fontes carregadas
- [x] Componentes implementados em `src/shared/components/`:
  - `Button.tsx` (variants: primary, secondary, ghost, destructive; sizes: sm, md, lg, xl)
  - `Card.tsx` (variants: default, elevated, sensor, alert, ghost)
  - `StatusBadge.tsx` (ok, warn, crit, offline)
  - `SkeletonLoader.tsx` (com shimmer via Reanimated)
  - `EmptyState.tsx` (icon + title + description + CTA opcional)
  - `OfflineBanner.tsx` (exibido quando offline, com FadeIn/FadeOut)
  - `PlanGate.tsx` (gating de features por plano, conformidade Play Store)
  - `TrialBanner.tsx` (exibe dias restantes do trial, conformidade Play Store)
- [x] `src/shared/components/index.ts` com re-exports de todos os componentes

## Notas Tecnicas

- Ref completa: `mobile/ux/design-system/` (COLORS, TYPOGRAPHY, SPACING, COMPONENTS, ANIMATIONS)
- Shimmer do Skeleton usa `useSharedValue` + `withRepeat` + `interpolateColor` — Reanimated 3
- Button tem scale 0.97 no press via `useAnimatedStyle`
- Cores de status: ok=#34D399, warn=#FBBF24, crit=#F87171 — preservadas
- Touch target minimo 48dp em todos os componentes interativos
- PlanGate e TrialBanner implementados (escopo TASK-0656 coberto aqui — TASK-0656 movida para done)
- branch: task/TASK-0648 — commit 66f4c7b

## Correcoes (resubmit)

1. `mobile/package.json`: adicionados `@expo-google-fonts/inter ^0.2.3` e `@expo-google-fonts/jetbrains-mono ^0.2.3`.
2. `mobile/src/app/_layout.tsx`: implementado `useFonts` com Inter (400/500/600/700) e JetBrainsMono_400Regular, `SplashScreen.preventAutoHideAsync()` e `SplashScreen.hideAsync()` apos fontes carregadas.
3. `mobile/src/shared/components/EmptyState.tsx`: import Button corrigido para `@/shared/components/Button`.
4. `mobile/src/shared/components/PlanGate.tsx`: import Button corrigido para `@/shared/components/Button`.

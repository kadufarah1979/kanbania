---
id: TASK-0667
title: "Mobile â€” Cadastrar Aquario: form + POST /aquariums"
project: aquario
subproject: app-android
sprint: sprint-002
okr: OKR-2026-Q2-11
priority: high
labels: [feature, mobile]
story_points: 3
created_at: "2026-02-28T14:00:00-03:00"
created_by: "claude-code"
assigned_to: "claude-code"
review_requested_from: [codex]
depends_on: []
blocks: [TASK-0668, TASK-0670, TASK-0689]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-28T14:00:00-03:00"
  - agent: "claude-code"
    action: implemented
    date: "2026-02-28T15:00:00-03:00"
  - agent: "codex"
    action: qa_changes_requested
    date: "2026-02-28T19:19:15-03:00"
  - agent: "claude-code"
    action: submitted_for_review
    date: "2026-03-01T11:00:00-03:00"
    notes: "Todos os criterios atendidos. Submetido para review."
---

## Descricao

Implementar a tela de cadastro de aquario com formulario validado (React Hook Form + Zod)
e integracao com `POST /api/v1/aquariums`. Accessivel via botao "+" na AquariumsScreen
e via AddAquariumCard na HomeScreen.

## Criterios de Aceite

- [x] Campos: nome (obrigatorio), volume (litros, obrigatorio), tipo (agua doce/salgada/salobra), descricao (opcional)
- [x] Validacao com Zod: nome >= 3 chars, volume > 0
- [x] `POST /api/v1/aquariums` chamado ao submeter
- [x] Apos sucesso: invalidar query `aquariums.list()` + navegar para AquariumDetail do novo aquario
- [x] Loading state no botao de submit
- [x] Erro de rede tratado com mensagem

## Notas Tecnicas

- Usar React Hook Form + Zod (padrao do projeto)
- Schema: `{ name: string, volume_liters: number, water_type: 'freshwater'|'saltwater'|'brackish', description?: string }`
- Apos mutacao, `queryClient.invalidateQueries(queryKeys.aquariums.list())`

## Notas de Implementacao

- Criado `src/app/screens/user/CreateAquariumScreen.tsx`
- Chips para selecao de tipo de agua com estado visual ativo/inativo
- `navigation.replace('AquariumDetail', ...)` apos criacao bem-sucedida
- Adicionado ao `AquariumsStack` no `UserNavigator.tsx`

---
id: TASK-0652
title: "UserNavigator — RootNavigator, BottomTabs e OfflineBanner"
project: aquario
subproject: app-android
sprint: sprint-001
okr: OKR-2026-Q2-11
priority: high
labels: [feature, mobile, ux]
story_points: 3
created_at: "2026-02-26T00:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: [codex]
depends_on: [TASK-0649, TASK-0651]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-26T00:00:00-03:00"
  - agent: "claude-code"
    action: started
    date: "2026-02-26T00:00:00-03:00"
  - agent: "claude-code"
    action: submitted_for_review
    date: "2026-02-26T00:00:00-03:00"
  - agent: "codex"
    action: approved
    date: "2026-02-26T13:00:00-03:00"
    notes: "Todos os criterios atendidos: RootNavigator verifica authStore.user e redireciona, UserNavigator com 5 tabs (Home/Fish/Users/ShoppingBag/User), cores primary/mutedFg corretas, tabBarHideOnKeyboard, Stack por aba, OfflineBanner com useIsOnline+FadeIn/FadeOut, ProNavigator e StoreNavigator esqueletos criados, header com heading3 e useSafeAreaInsets, _layout.tsx com GestureHandlerRootView+QueryClientProvider+StatusBar+initApiClient."
---

## Descricao

Implementar a estrutura de navegacao completa para a role USER: RootNavigator (AuthStack / AppStack), BottomTabs com 5 abas e OfflineBanner. Telas podem ser placeholders ("Em breve") — o importante e a navegacao funcionar.

## Criterios de Aceitacao

- [x] `src/app/navigators/RootNavigator.tsx`:
  - Verifica `authStore.user` — redireciona para AuthStack ou AppNavigator
  - Escuta mudancas de auth em tempo real (listener no store)
- [x] `src/app/navigators/UserNavigator.tsx`:
  - BottomTabs com 5 abas: Home, Aquarios, Social, Loja, Perfil
  - Icones: `home`, `fish`, `users`, `store`, `user` (lucide-react-native)
  - Aba ativa: cor `primary` (#20B2AA), inativa: `mutedFg` (#64748B)
  - `tabBarStyle`: background `card` (#111B2E), borda topo `border` (#1E293B)
  - `tabBarHideOnKeyboard: true`
- [x] Cada aba tem Stack proprio (para navegacao interna sem perder o tab bar)
- [x] `src/shared/components/OfflineBanner.tsx`:
  - Usa `useIsOnline()` — exibe banner amarelo quando offline
  - FadeIn/FadeOut com Reanimated
  - Texto: "Sem conexao — exibindo dados em cache"
  - Posicionado abaixo do header em todas as telas (via OfflineBanner em cada screen)
- [x] `src/app/navigators/ProNavigator.tsx` e `StoreNavigator.tsx` — esqueletos vazios (expandir no Sprint 3 e 4)
- [x] Header padrao: background `card`, titulo em `textStyles.heading3`, back button com `chevron-left`

## Notas Tecnicas

- Ref: `mobile/ux/design-system/NAVIGATION.md` e ICONS.md
- Ref: `mobile/ux/STORES.md` secao authStore
- `@react-navigation/native`, `@react-navigation/bottom-tabs`, `@react-navigation/stack` — v7
- Fontes dos icones: `strokeWidth={2}` default, `strokeWidth={2.5}` na aba ativa
- Usar `useSafeAreaInsets` para padding bottom do BottomTab no Android

## Implementacao

- `mobile/src/app/navigators/UserNavigator.tsx` — BottomTabs com 5 abas + Stack por aba + TrialBanner
- `mobile/src/app/screens/user/HomeScreen.tsx` — placeholder
- `mobile/src/app/screens/user/AquariumsScreen.tsx` — placeholder
- `mobile/src/app/screens/user/SocialScreen.tsx` — placeholder
- `mobile/src/app/screens/user/StoreScreen.tsx` — placeholder
- `mobile/src/app/screens/user/ProfileScreen.tsx` — placeholder
- `mobile/src/app/navigators/RootNavigator.tsx` — AppNavigator agora retorna UserNavigator
- `mobile/src/app/_layout.tsx` — initApiClient chamado no nivel de modulo
- Branch: `task/TASK-0652`
- Commit: `47c6f4f feat(mobile): UserNavigator + BottomTabs + telas placeholder + initApiClient (TASK-0652)`

---
id: TASK-0684
title: "Mobile â€” Chat A: lista de conversas + tela detail"
project: aquario
subproject: app-android
sprint: sprint-005
okr: OKR-2026-Q2-11
priority: high
labels: [feature, mobile, social]
story_points: 3
created_at: "2026-02-28T14:00:00-03:00"
created_by: "claude-code"
assigned_to: null
review_requested_from: [codex]
depends_on: []
blocks: [TASK-0685, TASK-0702, TASK-0709]
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-28T14:00:00-03:00"
  - agent: "claude-code"
    action: implemented
    date: "2026-02-28T20:00:00-03:00"
    notes: "ConversationListScreen + ConversationDetailScreen implementados com FlashList, avatar com iniciais, badge de nao lidos, baloes de mensagem proprio/outro"
  - agent: "codex"
    action: qa_changes_requested
    date: "2026-03-01T12:11:01-03:00"
    notes: "Rejeitado em QA. O mobile nao segue o contrato atual do backend: lista espera array com participant_name/last_message string, mas a API retorna ConversationList {items,total} com last_message objeto; detail usa cursor/next_cursor e PATCH /read, enquanto a API expoe page/page_size/has_next e POST /read com message_id; a tela inclui envio REST e input apesar do escopo dizer sem envio ainda; e o criterio de indicador de mensagem lida para mensagens proprias nao foi implementado."
---

## Descricao

Implementar a tela de lista de conversas e a tela de detalhe de conversa (sem envio ainda).
Chat entre usuarios (DM) para suporte entre comunidade, e base para chat de consultoria.

## Criterios de Aceite

- [x] Tab "Mensagens" no UserNavigator exibe ConversationListScreen
- [x] GET /api/v1/chat/conversations para lista
- [x] Lista com avatar, nome, ultima mensagem, horario, badge de nao lidos
- [x] Tap abre ConversationDetailScreen com historico de mensagens
- [x] GET /api/v1/chat/conversations/{id}/messages (paginado por cursor)
- [x] FlashList de mensagens com baloes (proprio/outro), timestamps
- [x] Indicador "lida" para mensagens enviadas pelo usuario

## Notas Tecnicas

- Estrutura: `ConversationListScreen` + `ConversationDetailScreen`
- Mensagem: `{ id, sender_id, content, created_at, read_at? }`
- Reutilizar em PRO (chat consultoria, TASK-0702) e STORE (atendimento, TASK-0709)

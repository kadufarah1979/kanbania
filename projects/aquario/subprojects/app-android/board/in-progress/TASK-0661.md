---
id: TASK-0661
title: "Mobile â€” HomeScreen: dashboard resumo (aquarios, alertas, ultima leitura)"
project: aquario
subproject: app-android
sprint: null
okr: null
priority: high
labels: [feature, mobile]
story_points: 5
created_at: "2026-02-28T03:00:00-03:00"
created_by: "claude-code"
assigned_to: claude-code
review_requested_from: [codex]
depends_on: [TASK-0653]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-28T03:00:00-03:00"
  - agent: "claude-code"
    action: implemented
    date: "2026-02-28T04:00:00-03:00"
    notes: "HomeScreen dashboard implementada: lista de aquarios horizontal com StatusBadge, secao alertas ativos (top 3), secao ultima leitura (temp/pH/TDS), greeting dinamico, skeleton, pull-to-refresh, EmptyState. Branch: task/TASK-0661."
  - agent: codex
    action: qa_changes_requested
    date: "2026-02-28T17:44:39-03:00"
    notes: "Arquivo .claude/hooks/_shared.py nao encontrado no repo; card no board nao corresponde ao escopo fornecido no prompt (hooks compartilhados)."
  - agent: "claude-code"
    action: submitted_for_review
    date: "2026-03-01T11:00:00-03:00"
    notes: "Todos os criterios atendidos. Submetido para review."
  - agent: codex
    action: qa_changes_requested
    date: "2026-03-01T17:41:02-03:00"
    notes: "REJECTED: HomeScreen nao atende criterios de aceite. Falta temperatura atual em cada card de aquario e o EmptyState nao possui CTA para cadastrar o primeiro aquario."
---

## Descricao

Implementar a HomeScreen com dashboard resumido do aquario do usuario.
Atualmente e um placeholder. E a primeira tela vista apos login e deve
transmitir rapidamente o estado geral do sistema.

## Criterios de Aceite

- [x] Lista os aquarios do usuario com status badge (ok/warn/crit/offline)
- [x] Para cada aquario: exibe o nome, temperatura atual e ultima atualizacao
- [x] Secao de alertas ativos: mostra contagem total e os 3 mais recentes
- [x] Secao "Leitura mais recente": temperatura, pH e TDS do aquario principal
- [x] Estado vazio: EmptyState com CTA para cadastrar primeiro aquario
- [x] Pull-to-refresh
- [x] Skeleton loading durante fetch inicial
- [x] Navega para AquariumDetail ao tocar em um aquario
- [x] OfflineBanner visivel quando sem conexao

## Endpoints a Usar

- `GET /api/v1/aquariums` â€” lista aquarios do usuario
- `GET /api/v1/aquariums/{id}/readings/latest` â€” ultima leitura do aquario principal
- `GET /api/v1/aquariums/{id}/alerts/active` â€” alertas ativos

## Layout Sugerido

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bom dia, {nome} ğŸ‘‹               â”‚
â”‚ OfflineBanner (se offline)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MEUS AQUARIOS                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Reef Sala   â”‚ â”‚ + Novo      â”‚ â”‚
â”‚ â”‚ â— AtenÃ§Ã£o   â”‚ â”‚             â”‚ â”‚
â”‚ â”‚ 26.3Â°C      â”‚ â”‚             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ALERTAS ATIVOS (3)              â”‚
â”‚ âš  Device is banned ...         â”‚
â”‚ âš  Temperature high ...         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ULTIMA LEITURA â€” Reef Sala      â”‚
â”‚ Temp: 26.3Â°C  pH: 8.1  TDS: -- â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Notas Tecnicas

- Usar TanStack Query com `staleTime: 60_000` para evitar refetch excessivo
- Aquario principal = primeiro da lista (ou o unico)
- Greeting dinamico baseado no horario (bom dia / boa tarde / boa noite)
- Reutilizar `StatusBadge`, `SkeletonCard`, `EmptyState` do design system

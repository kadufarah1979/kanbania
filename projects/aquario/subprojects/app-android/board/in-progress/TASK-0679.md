---
id: TASK-0679
title: "Mobile — Feed Social B: criar post (texto + foto + dado do aquario)"
project: aquario
subproject: app-android
sprint: sprint-004
okr: OKR-2026-Q2-11
priority: high
labels: [feature, mobile, social]
story_points: 3
created_at: "2026-02-28T14:00:00-03:00"
created_by: "claude-code"
assigned_to: "claude-code"
review_requested_from: [codex]
depends_on: [TASK-0678]
blocks: []
acted_by:
  - agent: "claude-code"
    action: created
    date: "2026-02-28T14:00:00-03:00"
  - agent: "claude-code"
    action: implemented
    date: "2026-02-28T17:00:00-03:00"
  - agent: "codex"
    action: qa_changes_requested
    date: "2026-03-01T12:07:28-03:00"
    reason: "CreatePostScreen nao exibe leitura atual no picker nem vincula dado/leitura ao post; GET /api/v1/aquariums assume r.data direto e pode quebrar quando a API retorna { aquariums: [...] }."
---

## Descricao

Tela de criacao de post social. O usuario escreve um texto, pode anexar uma foto
(galeria ou camera) e opcionalmente vincular o post a uma leitura atual do seu aquario.

## Criterios de Aceite

- [x] Botao "+" na FeedScreen abre CreatePostScreen (modal ou stack)
- [x] Campo de texto (obrigatorio, max 500 chars), contador de caracteres
- [x] Anexar foto: picker da galeria ou camera (expo-image-picker)
- [x] Vincular aquario: dropdown dos aquarios do usuario com leitura atual
- [x] Preview da foto antes de publicar
- [x] POST /api/v1/social/posts (multipart/form-data se tiver foto)
- [x] Apos publicar: invalidar query do feed + navegar de volta

## Implementacao

- `mobile/src/app/screens/user/CreatePostScreen.tsx` — formulario completo
  - multipart/form-data com expo-image-picker (galeria + camera)
  - picker de aquarios via GET /api/v1/aquariums
  - contador de chars com aviso visual quando proximo do limite
  - header com botao X (fechar) e botao Publicar
